<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>uwg.uwg &#8212; uwg  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=bfd3c5a7" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/x-icon" href="https://github.com/ladybug-tools/artwork/raw/refs/heads/master/icons_bugs/ico/uwg.ico">
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          uwg</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cli/validate.html">validate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/validate.html#uwg-validate">uwg validate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#uwg-validate-model">model</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#uwg-validate-param">param</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/simulate.html">simulate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/simulate.html#uwg-simulate">uwg simulate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/simulate.html#uwg-simulate-model">model</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/simulate.html#uwg-simulate-param">param</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">uwg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../uwg.html">uwg package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../uwg.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.cli.html">uwg.cli package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.cli.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.cli.simulate.html">uwg.cli.simulate module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.cli.validate.html">uwg.cli.validate module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.cli.html#module-uwg.cli">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../uwg.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.BEMDef.html">uwg.BEMDef module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef"><code class="docutils literal notranslate"><span class="pre">BEMDef</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.from_dict"><code class="docutils literal notranslate"><span class="pre">BEMDef.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.to_dict"><code class="docutils literal notranslate"><span class="pre">BEMDef.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.bldtype"><code class="docutils literal notranslate"><span class="pre">BEMDef.bldtype</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.building"><code class="docutils literal notranslate"><span class="pre">BEMDef.building</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.builtera"><code class="docutils literal notranslate"><span class="pre">BEMDef.builtera</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.mass"><code class="docutils literal notranslate"><span class="pre">BEMDef.mass</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.roof"><code class="docutils literal notranslate"><span class="pre">BEMDef.roof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.BEMDef.html#uwg.BEMDef.BEMDef.wall"><code class="docutils literal notranslate"><span class="pre">BEMDef.wall</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.RSMDef.html">uwg.RSMDef module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef"><code class="docutils literal notranslate"><span class="pre">RSMDef</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.diffusion_coefficient"><code class="docutils literal notranslate"><span class="pre">RSMDef.diffusion_coefficient()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.diffusion_equation"><code class="docutils literal notranslate"><span class="pre">RSMDef.diffusion_equation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.dissipation_bougeault"><code class="docutils literal notranslate"><span class="pre">RSMDef.dissipation_bougeault()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.invert"><code class="docutils literal notranslate"><span class="pre">RSMDef.invert()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.length_bougeault"><code class="docutils literal notranslate"><span class="pre">RSMDef.length_bougeault()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.load_z_meso"><code class="docutils literal notranslate"><span class="pre">RSMDef.load_z_meso()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.RSMDef.html#uwg.RSMDef.RSMDef.vdm"><code class="docutils literal notranslate"><span class="pre">RSMDef.vdm()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.UBLDef.html">uwg.UBLDef module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.UBLDef.html#uwg.UBLDef.UBLDef"><code class="docutils literal notranslate"><span class="pre">UBLDef</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.UBLDef.html#uwg.UBLDef.UBLDef.nightforc"><code class="docutils literal notranslate"><span class="pre">UBLDef.nightforc()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.UBLDef.html#uwg.UBLDef.UBLDef.ublmodel"><code class="docutils literal notranslate"><span class="pre">UBLDef.ublmodel()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.UCMDef.html">uwg.UCMDef module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.UCMDef.html#uwg.UCMDef.UCMDef"><code class="docutils literal notranslate"><span class="pre">UCMDef</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.UCMDef.html#uwg.UCMDef.UCMDef.UCModel"><code class="docutils literal notranslate"><span class="pre">UCMDef.UCModel()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.building.html">uwg.building module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building"><code class="docutils literal notranslate"><span class="pre">Building</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.BEMCalc"><code class="docutils literal notranslate"><span class="pre">Building.BEMCalc()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.from_dict"><code class="docutils literal notranslate"><span class="pre">Building.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.to_dict"><code class="docutils literal notranslate"><span class="pre">Building.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.TEMP_COEF_CONFLICT_MSG"><code class="docutils literal notranslate"><span class="pre">Building.TEMP_COEF_CONFLICT_MSG</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.condtype"><code class="docutils literal notranslate"><span class="pre">Building.condtype</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.coolcap"><code class="docutils literal notranslate"><span class="pre">Building.coolcap</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.cop"><code class="docutils literal notranslate"><span class="pre">Building.cop</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.floor_height"><code class="docutils literal notranslate"><span class="pre">Building.floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.glazing_ratio"><code class="docutils literal notranslate"><span class="pre">Building.glazing_ratio</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.heateff"><code class="docutils literal notranslate"><span class="pre">Building.heateff</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.infil"><code class="docutils literal notranslate"><span class="pre">Building.infil</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.initial_temp"><code class="docutils literal notranslate"><span class="pre">Building.initial_temp</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.int_heat_flat"><code class="docutils literal notranslate"><span class="pre">Building.int_heat_flat</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.int_heat_frad"><code class="docutils literal notranslate"><span class="pre">Building.int_heat_frad</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.int_heat_night"><code class="docutils literal notranslate"><span class="pre">Building.int_heat_night</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.shgc"><code class="docutils literal notranslate"><span class="pre">Building.shgc</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.u_value"><code class="docutils literal notranslate"><span class="pre">Building.u_value</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.building.html#uwg.building.Building.vent"><code class="docutils literal notranslate"><span class="pre">Building.vent</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.element.html">uwg.element module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element"><code class="docutils literal notranslate"><span class="pre">Element</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.Conduction"><code class="docutils literal notranslate"><span class="pre">Element.Conduction()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.SurfFlux"><code class="docutils literal notranslate"><span class="pre">Element.SurfFlux()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.from_dict"><code class="docutils literal notranslate"><span class="pre">Element.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.invert"><code class="docutils literal notranslate"><span class="pre">Element.invert()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.qsat"><code class="docutils literal notranslate"><span class="pre">Element.qsat()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.to_dict"><code class="docutils literal notranslate"><span class="pre">Element.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.albedo"><code class="docutils literal notranslate"><span class="pre">Element.albedo</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.emissivity"><code class="docutils literal notranslate"><span class="pre">Element.emissivity</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.horizontal"><code class="docutils literal notranslate"><span class="pre">Element.horizontal</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.layer_thickness_lst"><code class="docutils literal notranslate"><span class="pre">Element.layer_thickness_lst</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.material_lst"><code class="docutils literal notranslate"><span class="pre">Element.material_lst</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.name"><code class="docutils literal notranslate"><span class="pre">Element.name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.t_init"><code class="docutils literal notranslate"><span class="pre">Element.t_init</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.element.html#uwg.element.Element.vegcoverage"><code class="docutils literal notranslate"><span class="pre">Element.vegcoverage</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.forcing.html">uwg.forcing module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.forcing.html#uwg.forcing.Forcing"><code class="docutils literal notranslate"><span class="pre">Forcing</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.infracalcs.html">uwg.infracalcs module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.infracalcs.html#uwg.infracalcs.infracalcs"><code class="docutils literal notranslate"><span class="pre">infracalcs()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.material.html">uwg.material module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material"><code class="docutils literal notranslate"><span class="pre">Material</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material.from_dict"><code class="docutils literal notranslate"><span class="pre">Material.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material.to_dict"><code class="docutils literal notranslate"><span class="pre">Material.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material.name"><code class="docutils literal notranslate"><span class="pre">Material.name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material.thermalcond"><code class="docutils literal notranslate"><span class="pre">Material.thermalcond</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.material.html#uwg.material.Material.volheat"><code class="docutils literal notranslate"><span class="pre">Material.volheat</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.param.html">uwg.param module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.param.html#uwg.param.Param"><code class="docutils literal notranslate"><span class="pre">Param</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.psychrometrics.html">uwg.psychrometrics module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.psychrometrics.html#uwg.psychrometrics.hum_from_rhum_temp"><code class="docutils literal notranslate"><span class="pre">hum_from_rhum_temp()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.psychrometrics.html#uwg.psychrometrics.moist_air_density"><code class="docutils literal notranslate"><span class="pre">moist_air_density()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.psychrometrics.html#uwg.psychrometrics.psychrometrics"><code class="docutils literal notranslate"><span class="pre">psychrometrics()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.psychrometrics.html#uwg.psychrometrics.saturation_pressure"><code class="docutils literal notranslate"><span class="pre">saturation_pressure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.readDOE.html">uwg.readDOE module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.readDOE.html#uwg.readDOE.readDOE"><code class="docutils literal notranslate"><span class="pre">readDOE()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.schdef.html">uwg.schdef module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef"><code class="docutils literal notranslate"><span class="pre">SchDef</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.check_week_validity"><code class="docutils literal notranslate"><span class="pre">SchDef.check_week_validity()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.from_dict"><code class="docutils literal notranslate"><span class="pre">SchDef.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.to_dict"><code class="docutils literal notranslate"><span class="pre">SchDef.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.DEFAULT_SWH"><code class="docutils literal notranslate"><span class="pre">SchDef.DEFAULT_SWH</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.bldtype"><code class="docutils literal notranslate"><span class="pre">SchDef.bldtype</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.builtera"><code class="docutils literal notranslate"><span class="pre">SchDef.builtera</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.cool"><code class="docutils literal notranslate"><span class="pre">SchDef.cool</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.elec"><code class="docutils literal notranslate"><span class="pre">SchDef.elec</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.gas"><code class="docutils literal notranslate"><span class="pre">SchDef.gas</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.heat"><code class="docutils literal notranslate"><span class="pre">SchDef.heat</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.light"><code class="docutils literal notranslate"><span class="pre">SchDef.light</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.n_occ"><code class="docutils literal notranslate"><span class="pre">SchDef.n_occ</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.occ"><code class="docutils literal notranslate"><span class="pre">SchDef.occ</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.q_elec"><code class="docutils literal notranslate"><span class="pre">SchDef.q_elec</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.q_gas"><code class="docutils literal notranslate"><span class="pre">SchDef.q_gas</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.q_light"><code class="docutils literal notranslate"><span class="pre">SchDef.q_light</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.swh"><code class="docutils literal notranslate"><span class="pre">SchDef.swh</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.v_swh"><code class="docutils literal notranslate"><span class="pre">SchDef.v_swh</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.schdef.html#uwg.schdef.SchDef.vent"><code class="docutils literal notranslate"><span class="pre">SchDef.vent</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.simparam.html">uwg.simparam module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.simparam.html#uwg.simparam.SimParam"><code class="docutils literal notranslate"><span class="pre">SimParam</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.simparam.html#uwg.simparam.SimParam.update_date"><code class="docutils literal notranslate"><span class="pre">SimParam.update_date()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.simparam.html#uwg.simparam.SimParam.TIMESTEP_CONFLICT_MSG"><code class="docutils literal notranslate"><span class="pre">SimParam.TIMESTEP_CONFLICT_MSG</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.solarcalcs.html">uwg.solarcalcs module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.solarcalcs.html#uwg.solarcalcs.SolarCalcs"><code class="docutils literal notranslate"><span class="pre">SolarCalcs</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.solarcalcs.html#uwg.solarcalcs.SolarCalcs.solarangles"><code class="docutils literal notranslate"><span class="pre">SolarCalcs.solarangles()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.solarcalcs.html#uwg.solarcalcs.SolarCalcs.solarcalcs"><code class="docutils literal notranslate"><span class="pre">SolarCalcs.solarcalcs()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.urbflux.html">uwg.urbflux module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.urbflux.html#uwg.urbflux.urbflux"><code class="docutils literal notranslate"><span class="pre">urbflux()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.utilities.html">uwg.utilities module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.float_in_range"><code class="docutils literal notranslate"><span class="pre">float_in_range()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.float_in_range_excl"><code class="docutils literal notranslate"><span class="pre">float_in_range_excl()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.float_in_range_excl_incl"><code class="docutils literal notranslate"><span class="pre">float_in_range_excl_incl()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.float_in_range_incl_excl"><code class="docutils literal notranslate"><span class="pre">float_in_range_incl_excl()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.float_positive"><code class="docutils literal notranslate"><span class="pre">float_positive()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.int_in_range"><code class="docutils literal notranslate"><span class="pre">int_in_range()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.int_positive"><code class="docutils literal notranslate"><span class="pre">int_positive()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.is_near_zero"><code class="docutils literal notranslate"><span class="pre">is_near_zero()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.read_csv"><code class="docutils literal notranslate"><span class="pre">read_csv()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.utilities.html#uwg.utilities.str2fl"><code class="docutils literal notranslate"><span class="pre">str2fl()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.uwg.html">uwg.uwg module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG"><code class="docutils literal notranslate"><span class="pre">UWG</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.ToString"><code class="docutils literal notranslate"><span class="pre">UWG.ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.from_dict"><code class="docutils literal notranslate"><span class="pre">UWG.from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.from_param_args"><code class="docutils literal notranslate"><span class="pre">UWG.from_param_args()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.from_param_file"><code class="docutils literal notranslate"><span class="pre">UWG.from_param_file()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.generate"><code class="docutils literal notranslate"><span class="pre">UWG.generate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.load_refDOE"><code class="docutils literal notranslate"><span class="pre">UWG.load_refDOE()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.simulate"><code class="docutils literal notranslate"><span class="pre">UWG.simulate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.to_dict"><code class="docutils literal notranslate"><span class="pre">UWG.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.write_epw"><code class="docutils literal notranslate"><span class="pre">UWG.write_epw()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.B"><code class="docutils literal notranslate"><span class="pre">UWG.B</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.CL"><code class="docutils literal notranslate"><span class="pre">UWG.CL</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.CM"><code class="docutils literal notranslate"><span class="pre">UWG.CM</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.COLBURN"><code class="docutils literal notranslate"><span class="pre">UWG.COLBURN</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.CP"><code class="docutils literal notranslate"><span class="pre">UWG.CP</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.CPV"><code class="docutils literal notranslate"><span class="pre">UWG.CPV</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.CURRENT_PATH"><code class="docutils literal notranslate"><span class="pre">UWG.CURRENT_PATH</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.DEFAULT_BLD"><code class="docutils literal notranslate"><span class="pre">UWG.DEFAULT_BLD</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.DEFAULT_SCHTRAFFIC"><code class="docutils literal notranslate"><span class="pre">UWG.DEFAULT_SCHTRAFFIC</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.ESTT"><code class="docutils literal notranslate"><span class="pre">UWG.ESTT</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.G"><code class="docutils literal notranslate"><span class="pre">UWG.G</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.LV"><code class="docutils literal notranslate"><span class="pre">UWG.LV</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.LVTT"><code class="docutils literal notranslate"><span class="pre">UWG.LVTT</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.MAXTHICKNESS"><code class="docutils literal notranslate"><span class="pre">UWG.MAXTHICKNESS</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.MINTHICKNESS"><code class="docutils literal notranslate"><span class="pre">UWG.MINTHICKNESS</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.OPTIONAL_PARAMETER_SET"><code class="docutils literal notranslate"><span class="pre">UWG.OPTIONAL_PARAMETER_SET</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.PARAMETER_LIST"><code class="docutils literal notranslate"><span class="pre">UWG.PARAMETER_LIST</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.R"><code class="docutils literal notranslate"><span class="pre">UWG.R</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.REFDOE_PATH"><code class="docutils literal notranslate"><span class="pre">UWG.REFDOE_PATH</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.RV"><code class="docutils literal notranslate"><span class="pre">UWG.RV</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.SIGMA"><code class="docutils literal notranslate"><span class="pre">UWG.SIGMA</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.SOIL"><code class="docutils literal notranslate"><span class="pre">UWG.SOIL</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.SOILTCOND"><code class="docutils literal notranslate"><span class="pre">UWG.SOILTCOND</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.SOILVOLHEAT"><code class="docutils literal notranslate"><span class="pre">UWG.SOILVOLHEAT</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.TT"><code class="docutils literal notranslate"><span class="pre">UWG.TT</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.VK"><code class="docutils literal notranslate"><span class="pre">UWG.VK</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.WATERDENS"><code class="docutils literal notranslate"><span class="pre">UWG.WATERDENS</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.WGMAX"><code class="docutils literal notranslate"><span class="pre">UWG.WGMAX</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.Z_MESO_PATH"><code class="docutils literal notranslate"><span class="pre">UWG.Z_MESO_PATH</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.albroad"><code class="docutils literal notranslate"><span class="pre">UWG.albroad</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.albroof"><code class="docutils literal notranslate"><span class="pre">UWG.albroof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.albveg"><code class="docutils literal notranslate"><span class="pre">UWG.albveg</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.albwall"><code class="docutils literal notranslate"><span class="pre">UWG.albwall</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.autosize"><code class="docutils literal notranslate"><span class="pre">UWG.autosize</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.bld"><code class="docutils literal notranslate"><span class="pre">UWG.bld</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.blddensity"><code class="docutils literal notranslate"><span class="pre">UWG.blddensity</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.bldheight"><code class="docutils literal notranslate"><span class="pre">UWG.bldheight</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.c_circ"><code class="docutils literal notranslate"><span class="pre">UWG.c_circ</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.c_exch"><code class="docutils literal notranslate"><span class="pre">UWG.c_exch</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.charlength"><code class="docutils literal notranslate"><span class="pre">UWG.charlength</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.croad"><code class="docutils literal notranslate"><span class="pre">UWG.croad</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.day"><code class="docutils literal notranslate"><span class="pre">UWG.day</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.droad"><code class="docutils literal notranslate"><span class="pre">UWG.droad</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.dtsim"><code class="docutils literal notranslate"><span class="pre">UWG.dtsim</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.dtweather"><code class="docutils literal notranslate"><span class="pre">UWG.dtweather</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.epw_path"><code class="docutils literal notranslate"><span class="pre">UWG.epw_path</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.flr_h"><code class="docutils literal notranslate"><span class="pre">UWG.flr_h</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.glzr"><code class="docutils literal notranslate"><span class="pre">UWG.glzr</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.grasscover"><code class="docutils literal notranslate"><span class="pre">UWG.grasscover</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_mix"><code class="docutils literal notranslate"><span class="pre">UWG.h_mix</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_obs"><code class="docutils literal notranslate"><span class="pre">UWG.h_obs</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_ref"><code class="docutils literal notranslate"><span class="pre">UWG.h_ref</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_temp"><code class="docutils literal notranslate"><span class="pre">UWG.h_temp</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_ubl1"><code class="docutils literal notranslate"><span class="pre">UWG.h_ubl1</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_ubl2"><code class="docutils literal notranslate"><span class="pre">UWG.h_ubl2</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.h_wind"><code class="docutils literal notranslate"><span class="pre">UWG.h_wind</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.kroad"><code class="docutils literal notranslate"><span class="pre">UWG.kroad</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.latfocc"><code class="docutils literal notranslate"><span class="pre">UWG.latfocc</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.latgrss"><code class="docutils literal notranslate"><span class="pre">UWG.latgrss</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.lattree"><code class="docutils literal notranslate"><span class="pre">UWG.lattree</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.maxday"><code class="docutils literal notranslate"><span class="pre">UWG.maxday</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.maxnight"><code class="docutils literal notranslate"><span class="pre">UWG.maxnight</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.month"><code class="docutils literal notranslate"><span class="pre">UWG.month</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.nday"><code class="docutils literal notranslate"><span class="pre">UWG.nday</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.new_epw_path"><code class="docutils literal notranslate"><span class="pre">UWG.new_epw_path</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.radfequip"><code class="docutils literal notranslate"><span class="pre">UWG.radfequip</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.radflight"><code class="docutils literal notranslate"><span class="pre">UWG.radflight</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.radfocc"><code class="docutils literal notranslate"><span class="pre">UWG.radfocc</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.refBEM"><code class="docutils literal notranslate"><span class="pre">UWG.refBEM</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.refSchedule"><code class="docutils literal notranslate"><span class="pre">UWG.refSchedule</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.ref_bem_vector"><code class="docutils literal notranslate"><span class="pre">UWG.ref_bem_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.ref_sch_vector"><code class="docutils literal notranslate"><span class="pre">UWG.ref_sch_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.rurvegcover"><code class="docutils literal notranslate"><span class="pre">UWG.rurvegcover</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.schtraffic"><code class="docutils literal notranslate"><span class="pre">UWG.schtraffic</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.sensanth"><code class="docutils literal notranslate"><span class="pre">UWG.sensanth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.sensocc"><code class="docutils literal notranslate"><span class="pre">UWG.sensocc</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.shgc"><code class="docutils literal notranslate"><span class="pre">UWG.shgc</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.treecover"><code class="docutils literal notranslate"><span class="pre">UWG.treecover</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.vegcover"><code class="docutils literal notranslate"><span class="pre">UWG.vegcover</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.vegend"><code class="docutils literal notranslate"><span class="pre">UWG.vegend</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.vegroof"><code class="docutils literal notranslate"><span class="pre">UWG.vegroof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.vegstart"><code class="docutils literal notranslate"><span class="pre">UWG.vegstart</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.vertohor"><code class="docutils literal notranslate"><span class="pre">UWG.vertohor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.windmin"><code class="docutils literal notranslate"><span class="pre">UWG.windmin</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../uwg.uwg.html#uwg.uwg.UWG.zone"><code class="docutils literal notranslate"><span class="pre">UWG.zone</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../uwg.weather.html">uwg.weather module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../uwg.weather.html#uwg.weather.Weather"><code class="docutils literal notranslate"><span class="pre">Weather</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../uwg.html#module-uwg">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">uwg</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-4">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">uwg</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-8 content" role="main">
      
  <h1>Source code for uwg.uwg</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Urban Weather Generator (UWG) Version 4.2</span>

<span class="sd">Original Author: B. Bueno[1]</span>
<span class="sd">Edited by A. Nakano &amp; Lingfu Zhang</span>
<span class="sd">Modified by Joseph Yang (joeyang@mit.edu) - May, 2016</span>
<span class="sd">Translated to Python by Saeran Vasanthakumar - February, 2018</span>

<span class="sd">Note:</span>
<span class="sd">    [1] Bueno, Bruno; Norford, Leslie; Hidalgo, Julia; Pigeon, Gregoire (2012a).</span>
<span class="sd">    The urban weather generator, Journal of Building Performance Simulation. 6:4,269-281.</span>
<span class="sd">    doi: 10.1080/19401493.2012.718797</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">range</span> <span class="o">=</span> <span class="n">xrange</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">str</span> <span class="o">=</span> <span class="n">basestring</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">cPickle</span> <span class="k">as</span> <span class="nn">pickle</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pickle</span>

<span class="kn">from</span> <span class="nn">.simparam</span> <span class="kn">import</span> <span class="n">SimParam</span>
<span class="kn">from</span> <span class="nn">.weather</span> <span class="kn">import</span> <span class="n">Weather</span>
<span class="kn">from</span> <span class="nn">.material</span> <span class="kn">import</span> <span class="n">Material</span>
<span class="kn">from</span> <span class="nn">.element</span> <span class="kn">import</span> <span class="n">Element</span>
<span class="kn">from</span> <span class="nn">.param</span> <span class="kn">import</span> <span class="n">Param</span>
<span class="kn">from</span> <span class="nn">.UCMDef</span> <span class="kn">import</span> <span class="n">UCMDef</span>
<span class="kn">from</span> <span class="nn">.forcing</span> <span class="kn">import</span> <span class="n">Forcing</span>
<span class="kn">from</span> <span class="nn">.UBLDef</span> <span class="kn">import</span> <span class="n">UBLDef</span>
<span class="kn">from</span> <span class="nn">.RSMDef</span> <span class="kn">import</span> <span class="n">RSMDef</span>
<span class="kn">from</span> <span class="nn">.solarcalcs</span> <span class="kn">import</span> <span class="n">SolarCalcs</span>
<span class="kn">from</span> <span class="nn">.psychrometrics</span> <span class="kn">import</span> <span class="n">psychrometrics</span>
<span class="kn">from</span> <span class="nn">.urbflux</span> <span class="kn">import</span> <span class="n">urbflux</span>
<span class="kn">from</span> <span class="nn">.schdef</span> <span class="kn">import</span> <span class="n">SchDef</span>
<span class="kn">from</span> <span class="nn">.BEMDef</span> <span class="kn">import</span> <span class="n">BEMDef</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">utilities</span>
<span class="kn">from</span> <span class="nn">.utilities</span> <span class="kn">import</span> <span class="n">int_in_range</span><span class="p">,</span> <span class="n">float_in_range</span><span class="p">,</span> <span class="n">int_positive</span><span class="p">,</span> <span class="n">float_positive</span>
<span class="kn">from</span> <span class="nn">.utilities</span> <span class="kn">import</span> <span class="n">REF_BLDTYPE</span><span class="p">,</span> <span class="n">REF_BUILTERA</span><span class="p">,</span> <span class="n">REF_ZONETYPE</span><span class="p">,</span> <span class="n">REF_BLDTYPE_SET</span><span class="p">,</span> \
    <span class="n">REF_BUILTERA_SET</span><span class="p">,</span> <span class="n">REF_ZONETYPE_SET</span>


<div class="viewcode-block" id="UWG">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG">[docs]</a>
<span class="k">class</span> <span class="nc">UWG</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Morph a rural EPW file to urban conditions based on defined urban parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        epw_path: Text string for full path of the rural .epw file that will be</span>
<span class="sd">            morphed. If set to None, other input parameters can be assigned but the UWG</span>
<span class="sd">            model cannot be generated from the inputs, which is useful in cases where a</span>
<span class="sd">            UWG model needs to be serialized but the file path structure is not known.</span>
<span class="sd">            (Default: None).</span>
<span class="sd">        new_epw_dir: Optional text string for the destination directory into which the</span>
<span class="sd">            morphed .epw file is written. If None the morphed file will be written into</span>
<span class="sd">            the same directory as the rural .epw file. (Default: None).</span>
<span class="sd">        new_epw_name: Optional text string for the destination file name of the morphed</span>
<span class="sd">            .epw file. If None the morphed file will append &#39;_UWG&#39; to the original file</span>
<span class="sd">            name. (Default: None).</span>

<span class="sd">    Properties:</span>
<span class="sd">        * epw_path -- Full path of the rural .epw file that will be morphed.</span>
<span class="sd">        * new_epw_path -- Full path of the file name of the morphed .epw file.</span>
<span class="sd">        * refBEM -- Reference BEMDef matrix defined by built type, era, and zone.</span>
<span class="sd">        * refSchedule -- Reference SchDef matrix defined by built type, era, and zone.</span>
<span class="sd">        * month -- Number (1-12) representing simulation start month.</span>
<span class="sd">        * day -- Number (1-31) representing simulation start day.</span>
<span class="sd">        * nday -- Number of days to simulate.</span>
<span class="sd">        * dtsim -- Simlation time step in seconds.</span>
<span class="sd">        * dtweather -- Number for weather data time-step in seconds.</span>
<span class="sd">        * autosize -- Boolean to set HVAC autosize.</span>
<span class="sd">        * sensocc -- Sensible heat from occupant [W].</span>
<span class="sd">        * latfocc -- Latent heat fraction from occupant.</span>
<span class="sd">        * radfocc -- Radiant heat fraction from occupant.</span>
<span class="sd">        * radfequip -- Radiant heat fraction from equipment.</span>
<span class="sd">        * radflight -- Radiant heat fraction from electric light.</span>
<span class="sd">        * h_ubl1 -- Daytime urban boundary layer height in meters.</span>
<span class="sd">        * h_ubl2 -- Nighttime urban boundary layer height in meters.</span>
<span class="sd">        * h_ref -- Inversion height in meters.</span>
<span class="sd">        * h_temp -- Temperature height in meters.</span>
<span class="sd">        * h_wind -- Wind height in meters.</span>
<span class="sd">        * c_circ -- Wind scaling coefficient.</span>
<span class="sd">        * c_exch -- Exchange velocity coefficient.</span>
<span class="sd">        * maxday -- Maximum heat flux threshold for daytime conditions [W/m2].</span>
<span class="sd">        * maxnight -- Maximum heat flux threshold for nighttime conditions [W/m2].</span>
<span class="sd">        * windmin -- Minimum wind speed in m/s.</span>
<span class="sd">        * h_obs -- Rural average obstacle height in meters.</span>
<span class="sd">        * bldheight -- Urban building height in meters.</span>
<span class="sd">        * h_mix -- Fraction of HVAC waste heat released to street canyon.</span>
<span class="sd">        * blddensity -- Building footprint density as fraction of urban area.</span>
<span class="sd">        * vertohor -- Vertical-to-horizontal urban area ratio.</span>
<span class="sd">        * charlength -- Urban characteristic length in meters.</span>
<span class="sd">        * albroad -- Urban road albedo.</span>
<span class="sd">        * droad -- Thickness of urban road pavement thickness in meters.</span>
<span class="sd">        * sensanth -- Street level anthropogenic sensible heat [W/m2].</span>
<span class="sd">        * zone -- Index representing an ASHRAE climate zone.</span>
<span class="sd">        * grasscover -- Fraction of urban ground covered in grass only.</span>
<span class="sd">        * treecover -- Fraction of urban ground covered in trees.</span>
<span class="sd">        * vegstart -- Month in which vegetation starts to evapotranspire.</span>
<span class="sd">        * vegend -- Month in which vegetation stops evapotranspiration.</span>
<span class="sd">        * albveg -- Vegetation albedo.</span>
<span class="sd">        * rurvegcover -- Fraction of rural ground covered by vegetation.</span>
<span class="sd">        * latgrss -- Fraction of latent heat absorbed by urban grass.</span>
<span class="sd">        * lattree -- Fraction latent heat absorbed by urban trees.</span>
<span class="sd">        * schtraffic -- Schedule of fractional anthropogenic heat load.</span>
<span class="sd">        * kroad -- Road pavement conductivity [W/m-K].</span>
<span class="sd">        * croad -- Road pavement volumetric heat capacity [J/m^3K].</span>
<span class="sd">        * bld -- Matrix of numbers representing fraction of urban building stock.</span>
<span class="sd">        * albroof -- Average building roof albedo.</span>
<span class="sd">        * vegroof -- Fraction of roof covered in grass/shrubs.</span>
<span class="sd">        * glzr -- Building glazing ratio.</span>
<span class="sd">        * albwall -- Building albedo.</span>
<span class="sd">        * shgc -- Building glazing Solar Heat Gain Coefficient (SHGC).</span>
<span class="sd">        * flr_h -- Building floor height in meters.</span>
<span class="sd">        * ref_bem_vector -- List of custom BEMDef objects to override the refBEM.</span>
<span class="sd">        * ref_sch_vector -- List of custom SchDef objects to override the refSchedule.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Definitions for constants / other parameters</span>
    <span class="n">MINTHICKNESS</span> <span class="o">=</span> <span class="mf">0.01</span>    <span class="c1"># Minimum layer thickness (to prevent crashing) (m)</span>
    <span class="n">MAXTHICKNESS</span> <span class="o">=</span> <span class="mf">0.05</span>    <span class="c1"># Maximum layer thickness (m)</span>
    <span class="c1"># http://web.mit.edu/parmstr/Public/NRCan/nrcc29118.pdf (Figly &amp; Snodgrass)</span>
    <span class="n">SOILTCOND</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="c1"># http://www.europment.org/library/2013/venice/bypaper/MFHEEF/MFHEEF-21.pdf</span>
    <span class="c1"># (average taken from Table 1)</span>
    <span class="n">SOILVOLHEAT</span> <span class="o">=</span> <span class="mf">2e6</span>
    <span class="c1"># Soil material used for soil-depth padding</span>
    <span class="n">SOIL</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">SOILTCOND</span><span class="p">,</span> <span class="n">SOILVOLHEAT</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;soil&#39;</span><span class="p">)</span>
    <span class="c1"># Physical constants</span>
    <span class="n">G</span> <span class="o">=</span> <span class="mf">9.81</span>               <span class="c1"># gravity (m s-2)</span>
    <span class="n">CP</span> <span class="o">=</span> <span class="mf">1004.</span>             <span class="c1"># heat capacity for air (J/kg K)</span>
    <span class="n">VK</span> <span class="o">=</span> <span class="mf">0.40</span>              <span class="c1"># von karman constant (dimensionless)</span>
    <span class="n">R</span> <span class="o">=</span> <span class="mf">287.</span>               <span class="c1"># gas constant dry air (J/kg K)</span>
    <span class="n">RV</span> <span class="o">=</span> <span class="mf">461.5</span>             <span class="c1"># gas constant water vapor (J/kg K)</span>
    <span class="n">LV</span> <span class="o">=</span> <span class="mf">2.26e6</span>            <span class="c1"># latent heat of evaporation (J/kg)</span>
    <span class="n">SIGMA</span> <span class="o">=</span> <span class="mf">5.67e-08</span>       <span class="c1"># Stefan Boltzmann constant (W m-2 K-4)</span>
    <span class="n">WATERDENS</span> <span class="o">=</span> <span class="mf">1000.</span>      <span class="c1"># water density (kg m-3)</span>
    <span class="n">LVTT</span> <span class="o">=</span> <span class="mf">2.5008e6</span>        <span class="c1">#</span>
    <span class="n">TT</span> <span class="o">=</span> <span class="mf">273.16</span>            <span class="c1">#</span>
    <span class="n">ESTT</span> <span class="o">=</span> <span class="mf">611.14</span>          <span class="c1">#</span>
    <span class="n">CL</span> <span class="o">=</span> <span class="mf">4.218e3</span>           <span class="c1">#</span>
    <span class="n">CPV</span> <span class="o">=</span> <span class="mf">1846.1</span>           <span class="c1">#</span>
    <span class="n">B</span> <span class="o">=</span> <span class="mf">9.4</span>                <span class="c1"># Coefficients derived by Louis (1979)</span>
    <span class="n">CM</span> <span class="o">=</span> <span class="mf">7.4</span>               <span class="c1">#</span>
    <span class="c1"># (Pr/Sc)^(2/3) for Colburn analogy in water evaporation</span>
    <span class="n">COLBURN</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">((</span><span class="mf">0.713</span> <span class="o">/</span> <span class="mf">0.621</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">))</span>
    <span class="c1"># Site-specific parameters</span>
    <span class="n">WGMAX</span> <span class="o">=</span> <span class="mf">0.005</span>  <span class="c1"># maximum film water depth on horizontal surfaces (m)</span>

    <span class="c1"># UWG object constants</span>
    <span class="n">PARAMETER_LIST</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;nday&#39;</span><span class="p">,</span> <span class="s1">&#39;dtsim&#39;</span><span class="p">,</span> <span class="s1">&#39;dtweather&#39;</span><span class="p">,</span> <span class="s1">&#39;autosize&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;sensocc&#39;</span><span class="p">,</span> <span class="s1">&#39;latfocc&#39;</span><span class="p">,</span> <span class="s1">&#39;radfocc&#39;</span><span class="p">,</span> <span class="s1">&#39;radfequip&#39;</span><span class="p">,</span> <span class="s1">&#39;radflight&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;h_ubl1&#39;</span><span class="p">,</span> <span class="s1">&#39;h_ubl2&#39;</span><span class="p">,</span> <span class="s1">&#39;h_ref&#39;</span><span class="p">,</span> <span class="s1">&#39;h_temp&#39;</span><span class="p">,</span> <span class="s1">&#39;h_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;c_circ&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;c_exch&#39;</span><span class="p">,</span> <span class="s1">&#39;maxday&#39;</span><span class="p">,</span> <span class="s1">&#39;maxnight&#39;</span><span class="p">,</span> <span class="s1">&#39;windmin&#39;</span><span class="p">,</span> <span class="s1">&#39;h_obs&#39;</span><span class="p">,</span> <span class="s1">&#39;bldheight&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;h_mix&#39;</span><span class="p">,</span> <span class="s1">&#39;blddensity&#39;</span><span class="p">,</span> <span class="s1">&#39;vertohor&#39;</span><span class="p">,</span> <span class="s1">&#39;charlength&#39;</span><span class="p">,</span> <span class="s1">&#39;albroad&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;droad&#39;</span><span class="p">,</span> <span class="s1">&#39;sensanth&#39;</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span><span class="p">,</span> <span class="s1">&#39;grasscover&#39;</span><span class="p">,</span> <span class="s1">&#39;treecover&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;vegstart&#39;</span><span class="p">,</span> <span class="s1">&#39;vegend&#39;</span><span class="p">,</span> <span class="s1">&#39;albveg&#39;</span><span class="p">,</span> <span class="s1">&#39;rurvegcover&#39;</span><span class="p">,</span> <span class="s1">&#39;latgrss&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;lattree&#39;</span><span class="p">,</span> <span class="s1">&#39;schtraffic&#39;</span><span class="p">,</span> <span class="s1">&#39;kroad&#39;</span><span class="p">,</span> <span class="s1">&#39;croad&#39;</span><span class="p">,</span> <span class="s1">&#39;bld&#39;</span><span class="p">,</span> <span class="s1">&#39;shgc&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;albroof&#39;</span><span class="p">,</span> <span class="s1">&#39;glzr&#39;</span><span class="p">,</span> <span class="s1">&#39;vegroof&#39;</span><span class="p">,</span> <span class="s1">&#39;albwall&#39;</span><span class="p">,</span> <span class="s1">&#39;flr_h&#39;</span><span class="p">)</span>
    <span class="n">OPTIONAL_PARAMETER_SET</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shgc&#39;</span><span class="p">,</span> <span class="s1">&#39;albroof&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;glzr&#39;</span><span class="p">,</span> <span class="s1">&#39;vegroof&#39;</span><span class="p">,</span> <span class="s1">&#39;albwall&#39;</span><span class="p">,</span> <span class="s1">&#39;flr_h&#39;</span><span class="p">}</span>
    <span class="n">DEFAULT_BLD</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;largeoffice&#39;</span><span class="p">,</span> <span class="s1">&#39;pst80&#39;</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span>
                   <span class="p">(</span><span class="s1">&#39;midriseapartment&#39;</span><span class="p">,</span> <span class="s1">&#39;pst80&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
    <span class="n">DEFAULT_SCHTRAFFIC</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span>
         <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>  <span class="c1"># Weekday</span>
        <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span>
         <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>  <span class="c1"># Saturday</span>
        <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span>
         <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">))</span>  <span class="c1"># Sunday</span>

    <span class="c1"># Constant file paths</span>
    <span class="n">CURRENT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
    <span class="n">Z_MESO_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CURRENT_PATH</span><span class="p">,</span> <span class="s1">&#39;refdata&#39;</span><span class="p">,</span> <span class="s1">&#39;z_meso.txt&#39;</span><span class="p">)</span>
    <span class="n">REFDOE_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CURRENT_PATH</span><span class="p">,</span> <span class="s1">&#39;refdata&#39;</span><span class="p">,</span> <span class="s1">&#39;readDOE.pkl&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epw_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span> <span class="o">=</span> <span class="n">epw_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_name</span> <span class="o">=</span> <span class="n">new_epw_dir</span><span class="p">,</span> <span class="n">new_epw_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># set defaults for reference data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refBEM</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refSchedule</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ref_bem_vector</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ref_sch_vector</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Parameters for UWG computation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epw_precision</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># Set default for optional parameters as None, if user doesn&#39;t modify</span>
        <span class="c1"># use DOE reference equivalents.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shgc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flr_h</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_albroof</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_albwall</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_glzr</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vegroof</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Empty latanth not used.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latanth</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="UWG.from_param_file">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.from_param_file">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_param_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">param_path</span><span class="p">,</span> <span class="n">epw_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">new_epw_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a UWG object from the .uwg parameter file.</span>

<span class="sd">        Note: this method of initializing the UWG object doesn&#39;t permit adding custom</span>
<span class="sd">        reference data.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_path: Optional text string for full path of the the .uwg parameter file</span>
<span class="sd">                path.</span>
<span class="sd">            epw_path: Text string for full path of the rural .epw file that will be</span>
<span class="sd">                morphed. If set to None, other input parameters can be assigned but the</span>
<span class="sd">                UWG model cannot be generated from the inputs, which is useful in cases</span>
<span class="sd">                where a UWG model needs to be serialized but the file path structure is</span>
<span class="sd">                not known. (Default: None).</span>
<span class="sd">            new_epw_dir: Optional text string destination directory for the morphed</span>
<span class="sd">                .epw file. If None the morphed file will be written into the same</span>
<span class="sd">                directory as the rural .epw file. (Default: None).</span>
<span class="sd">            new_epw_name: Optional destination file name for the morphed .epw file.</span>
<span class="sd">                If None the morphed file will append &#39;_UWG&#39; to the original file name.</span>
<span class="sd">                (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">param_path</span><span class="p">),</span> <span class="s1">&#39;Parameter file &quot;</span><span class="si">{}</span><span class="s1">&quot; does not &#39;</span> \
            <span class="s1">&#39;exist.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param_path</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">param_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.uwg&#39;</span><span class="p">),</span> <span class="s1">&#39;Parameter file must be a &quot;.uwg&quot; &#39;</span> \
            <span class="s1">&#39;filetype. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param_path</span><span class="p">)</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">UWG</span><span class="p">(</span><span class="n">epw_path</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_read_input</span><span class="p">(</span><span class="n">param_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span></div>


<div class="viewcode-block" id="UWG.from_param_args">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.from_param_args">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_param_args</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">bldheight</span><span class="p">,</span> <span class="n">blddensity</span><span class="p">,</span> <span class="n">vertohor</span><span class="p">,</span> <span class="n">grasscover</span><span class="p">,</span>
                        <span class="n">treecover</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nday</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span> <span class="n">dtsim</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
                        <span class="n">dtweather</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">bld</span><span class="o">=</span><span class="n">DEFAULT_BLD</span><span class="p">,</span> <span class="n">autosize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">h_mix</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sensocc</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">latfocc</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">radfocc</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">radfequip</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                        <span class="n">radflight</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">charlength</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">albroad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                        <span class="n">droad</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">kroad</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">croad</span><span class="o">=</span><span class="mi">1600000</span><span class="p">,</span> <span class="n">rurvegcover</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">vegstart</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">vegend</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                        <span class="n">albveg</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">latgrss</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">lattree</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">sensanth</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                        <span class="n">schtraffic</span><span class="o">=</span><span class="n">DEFAULT_SCHTRAFFIC</span><span class="p">,</span> <span class="n">h_ubl1</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">h_ubl2</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">h_ref</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
                        <span class="n">h_temp</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">h_wind</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">c_circ</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">c_exch</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxday</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
                        <span class="n">maxnight</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">windmin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">h_obs</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">epw_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">new_epw_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ref_bem_vector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">ref_sch_vector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an UWG object based on default method arguments.</span>

<span class="sd">        The default parameters are set from example parameters defined by Bueno et al.</span>
<span class="sd">        (2012a)[1] for Singapore. The original file can be accessed here:</span>
<span class="sd">        https://github.com/ladybug-tools/uwg/blob/master/resources/initialize_singapore.uwg.</span>

<span class="sd">        Note:</span>
<span class="sd">            [1] Bueno, Bruno; Norford, Leslie; Hidalgo, Julia; Pigeon, Gregoire (2012a).</span>
<span class="sd">            The urban weather generator, Journal of Building Performance Simulation. 6:4,</span>
<span class="sd">            269-281. doi: 10.1080/19401493.2012.718797</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">UWG</span><span class="p">(</span><span class="n">epw_path</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="p">)</span>

        <span class="n">model</span><span class="o">.</span><span class="n">bldheight</span> <span class="o">=</span> <span class="n">bldheight</span>
        <span class="n">model</span><span class="o">.</span><span class="n">blddensity</span> <span class="o">=</span> <span class="n">blddensity</span>
        <span class="n">model</span><span class="o">.</span><span class="n">vertohor</span> <span class="o">=</span> <span class="n">vertohor</span>
        <span class="n">model</span><span class="o">.</span><span class="n">zone</span> <span class="o">=</span> <span class="n">zone</span>
        <span class="n">model</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="n">month</span>
        <span class="n">model</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
        <span class="n">model</span><span class="o">.</span><span class="n">nday</span> <span class="o">=</span> <span class="n">nday</span>
        <span class="n">model</span><span class="o">.</span><span class="n">dtsim</span> <span class="o">=</span> <span class="n">dtsim</span>
        <span class="n">model</span><span class="o">.</span><span class="n">dtweather</span> <span class="o">=</span> <span class="n">dtweather</span>
        <span class="n">model</span><span class="o">.</span><span class="n">autosize</span> <span class="o">=</span> <span class="n">autosize</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_mix</span> <span class="o">=</span> <span class="n">h_mix</span>
        <span class="n">model</span><span class="o">.</span><span class="n">sensocc</span> <span class="o">=</span> <span class="n">sensocc</span>
        <span class="n">model</span><span class="o">.</span><span class="n">latfocc</span> <span class="o">=</span> <span class="n">latfocc</span>
        <span class="n">model</span><span class="o">.</span><span class="n">radfocc</span> <span class="o">=</span> <span class="n">radfocc</span>
        <span class="n">model</span><span class="o">.</span><span class="n">radfequip</span> <span class="o">=</span> <span class="n">radfequip</span>
        <span class="n">model</span><span class="o">.</span><span class="n">radflight</span> <span class="o">=</span> <span class="n">radflight</span>
        <span class="n">model</span><span class="o">.</span><span class="n">bld</span> <span class="o">=</span> <span class="n">bld</span>
        <span class="n">model</span><span class="o">.</span><span class="n">charlength</span> <span class="o">=</span> <span class="n">charlength</span>
        <span class="n">model</span><span class="o">.</span><span class="n">albroad</span> <span class="o">=</span> <span class="n">albroad</span>
        <span class="n">model</span><span class="o">.</span><span class="n">droad</span> <span class="o">=</span> <span class="n">droad</span>
        <span class="n">model</span><span class="o">.</span><span class="n">sensanth</span> <span class="o">=</span> <span class="n">sensanth</span>
        <span class="n">model</span><span class="o">.</span><span class="n">kroad</span> <span class="o">=</span> <span class="n">kroad</span>
        <span class="n">model</span><span class="o">.</span><span class="n">croad</span> <span class="o">=</span> <span class="n">croad</span>
        <span class="n">model</span><span class="o">.</span><span class="n">treecover</span> <span class="o">=</span> <span class="n">treecover</span>
        <span class="n">model</span><span class="o">.</span><span class="n">grasscover</span> <span class="o">=</span> <span class="n">grasscover</span>
        <span class="n">model</span><span class="o">.</span><span class="n">vegstart</span> <span class="o">=</span> <span class="n">vegstart</span>
        <span class="n">model</span><span class="o">.</span><span class="n">vegend</span> <span class="o">=</span> <span class="n">vegend</span>
        <span class="n">model</span><span class="o">.</span><span class="n">albveg</span> <span class="o">=</span> <span class="n">albveg</span>
        <span class="n">model</span><span class="o">.</span><span class="n">rurvegcover</span> <span class="o">=</span> <span class="n">rurvegcover</span>
        <span class="n">model</span><span class="o">.</span><span class="n">latgrss</span> <span class="o">=</span> <span class="n">latgrss</span>
        <span class="n">model</span><span class="o">.</span><span class="n">lattree</span> <span class="o">=</span> <span class="n">lattree</span>
        <span class="n">model</span><span class="o">.</span><span class="n">schtraffic</span> <span class="o">=</span> <span class="n">schtraffic</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_ubl1</span> <span class="o">=</span> <span class="n">h_ubl1</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_ubl2</span> <span class="o">=</span> <span class="n">h_ubl2</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_ref</span> <span class="o">=</span> <span class="n">h_ref</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_temp</span> <span class="o">=</span> <span class="n">h_temp</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_wind</span> <span class="o">=</span> <span class="n">h_wind</span>
        <span class="n">model</span><span class="o">.</span><span class="n">c_circ</span> <span class="o">=</span> <span class="n">c_circ</span>
        <span class="n">model</span><span class="o">.</span><span class="n">c_exch</span> <span class="o">=</span> <span class="n">c_exch</span>
        <span class="n">model</span><span class="o">.</span><span class="n">maxday</span> <span class="o">=</span> <span class="n">maxday</span>
        <span class="n">model</span><span class="o">.</span><span class="n">maxnight</span> <span class="o">=</span> <span class="n">maxnight</span>
        <span class="n">model</span><span class="o">.</span><span class="n">windmin</span> <span class="o">=</span> <span class="n">windmin</span>
        <span class="n">model</span><span class="o">.</span><span class="n">h_obs</span> <span class="o">=</span> <span class="n">h_obs</span>

        <span class="c1"># check and add reference data</span>
        <span class="n">refcheck</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ref_sch_vector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="o">+</span> \
            <span class="nb">int</span><span class="p">(</span><span class="n">ref_bem_vector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">refcheck</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;The ref_sch_vector and ref_bem_vector must both be &#39;</span> \
            <span class="s1">&#39;defined in order to modify the UWG reference data. Only </span><span class="si">{}</span><span class="s1"> is &#39;</span> \
            <span class="s1">&#39;defined.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s1">&#39;ref_sch_vector&#39;</span> <span class="k">if</span> <span class="n">ref_bem_vector</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;ref_bem_vector&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">refcheck</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">ref_sch_vector</span> <span class="o">=</span> \
                <span class="n">model</span><span class="o">.</span><span class="n">_check_reference_data</span><span class="p">(</span><span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">ref_sch_vector</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">model</span></div>


<div class="viewcode-block" id="UWG.from_dict">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">epw_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an UWG object from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An UWG dictionary following the format below. Note that</span>
<span class="sd">                this example has been truncated for the sake of brevity. For</span>
<span class="sd">                the full list of required properties in the UWG, see the</span>
<span class="sd">                initialization docstrings.</span>
<span class="sd">            epw_path: Text string for full path of the rural .epw file that will be</span>
<span class="sd">                morphed. If set to None, other input parameters can be assigned but the</span>
<span class="sd">                UWG model cannot be generated from the inputs, which is useful in cases</span>
<span class="sd">                where a UWG model needs to be serialized but the file path structure is</span>
<span class="sd">                not known. (Default: None).</span>
<span class="sd">            new_epw_dir: Optional text string for the destination directory into which</span>
<span class="sd">                the morphed .epw file is written. If None the morphed file will be</span>
<span class="sd">                written into the same directory as the rural .epw file. (Default: None).</span>
<span class="sd">            new_epw_name: Optional text string for the destination file name of the</span>
<span class="sd">                morphed .epw file. If None the morphed file will append &#39;_UWG&#39; to the</span>
<span class="sd">                original file name. (Default: None).</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;UWG&quot;,</span>
<span class="sd">            &quot;bldheight&quot;: 10,</span>
<span class="sd">            &quot;blddensity&quot;: 0.5,</span>
<span class="sd">            &quot;vertohor&quot;: 0.8,</span>
<span class="sd">            ...</span>
<span class="sd">            &quot;h_obs&quot;: 0.1,</span>
<span class="sd">            &quot;flr_h&quot;: 3.5,</span>
<span class="sd">            &quot;shgc&quot;: None,</span>
<span class="sd">            # Optional vector of SchDef dictionary.</span>
<span class="sd">            &quot;ref_sch_vector&quot;: [sch.to_dict()]</span>
<span class="sd">            # Optional vector of BEMDef dictionary.</span>
<span class="sd">            &quot;ref_bem_vector&quot;: [bem.to_dict()]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;UWG&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected UWG dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">UWG</span><span class="p">(</span><span class="n">epw_path</span><span class="p">,</span> <span class="n">new_epw_dir</span><span class="p">,</span> <span class="n">new_epw_name</span><span class="p">)</span>

        <span class="c1"># set UWG parameters</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">PARAMETER_LIST</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>

        <span class="c1"># check and add reference data</span>
        <span class="n">check_sch</span> <span class="o">=</span> <span class="s1">&#39;ref_sch_vector&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ref_sch_vector&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">check_bem</span> <span class="o">=</span> <span class="s1">&#39;ref_bem_vector&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ref_bem_vector&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">refcheck</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">check_sch</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">check_bem</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">refcheck</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;The ref_sch_vector and ref_bem_vector &#39;</span> \
            <span class="s1">&#39;properties must both be defined in order to modify the UWG reference &#39;</span> \
            <span class="s1">&#39;data. Only </span><span class="si">{}</span><span class="s1"> is defined.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s1">&#39;ref_sch_vector&#39;</span> <span class="k">if</span> <span class="s1">&#39;ref_sch_vector&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="s1">&#39;ref_bem_vector&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">refcheck</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">ref_sch_vector</span> <span class="o">=</span> <span class="p">[</span><span class="n">SchDef</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">schdict</span><span class="p">)</span>
                              <span class="k">for</span> <span class="n">schdict</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ref_sch_vector&#39;</span><span class="p">]]</span>
            <span class="n">ref_bem_vector</span> <span class="o">=</span> <span class="p">[</span><span class="n">BEMDef</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">bemdict</span><span class="p">)</span>
                              <span class="k">for</span> <span class="n">bemdict</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ref_bem_vector&#39;</span><span class="p">]]</span>

        <span class="k">if</span> <span class="n">refcheck</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">ref_sch_vector</span> <span class="o">=</span> \
                <span class="n">model</span><span class="o">.</span><span class="n">_check_reference_data</span><span class="p">(</span><span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">ref_sch_vector</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">model</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">epw_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get full path to rural .epw file to be morphed.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_epw_path</span>

    <span class="nd">@epw_path</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">epw_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span>
                <span class="n">value</span><span class="p">),</span> <span class="s1">&#39;File: &quot;</span><span class="si">{}</span><span class="s1">&quot; does not exist.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_epw_path</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">new_epw_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get text string for new epw filepath.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_dir</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">epw_dir</span><span class="p">,</span> <span class="n">epw_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_dir</span> <span class="o">=</span> <span class="n">epw_dir</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">nepw_name</span> <span class="o">=</span> <span class="n">epw_name</span>
                    <span class="k">if</span> <span class="n">nepw_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.epw&#39;</span><span class="p">):</span>
                        <span class="n">nepw_name</span> <span class="o">=</span> <span class="n">nepw_name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_name</span> <span class="o">=</span> <span class="n">nepw_name</span> <span class="o">+</span> <span class="s1">&#39;_UWG.epw&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_epw_path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">refBEM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get matrix of DOE reference BEMDefs defined by built type, era, and zone.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refBEM</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refBEM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refSchedule</span> <span class="o">=</span> <span class="n">UWG</span><span class="o">.</span><span class="n">load_refDOE</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refBEM</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">refSchedule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get matrix of DOE reference SchDefs defined by built type, era, and zone.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refSchedule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refBEM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refSchedule</span> <span class="o">=</span> <span class="n">UWG</span><span class="o">.</span><span class="n">load_refDOE</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refSchedule</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">month</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set number (1-12) as simulation start month.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_month</span>

    <span class="nd">@month</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">month</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_month</span> <span class="o">=</span> <span class="n">int_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">day</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set number (1-31) as simulation start day.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_day</span>

    <span class="nd">@day</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">day</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_day</span> <span class="o">=</span> <span class="n">int_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set number of days to simulate.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nday</span>

    <span class="nd">@nday</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nday</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nday</span> <span class="o">=</span> <span class="n">int_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;nday&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dtsim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set simulation timestep in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtsim</span>

    <span class="nd">@dtsim</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dtsim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dtsim</span> <span class="o">=</span> <span class="n">int_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;dtsim&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dtweather</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set weather data timestep in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dtweather</span>

    <span class="nd">@dtweather</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dtweather</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dtweather</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;dtweather&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">autosize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set boolean to autosize HVAC system.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autosize</span>

    <span class="nd">@autosize</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">autosize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)),</span> <span class="s1">&#39;Input autosize must be a &#39;</span> \
            <span class="s1">&#39;boolean value or a number that can be cast as or boolean value. &#39;</span> \
            <span class="s1">&#39;Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autosize</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sensocc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set sensible heat from occupant [W].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sensocc</span>

    <span class="nd">@sensocc</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sensocc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sensocc</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;sensocc&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latfocc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set latent heat fraction from occupant.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latfocc</span>

    <span class="nd">@latfocc</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">latfocc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latfocc</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;latfocc&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radfocc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set radiant heat fraction from occupant.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_radfocc</span>

    <span class="nd">@radfocc</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">radfocc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_radfocc</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;radfocc&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radfequip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set radiant heat fraction from equipment.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_radfequip</span>

    <span class="nd">@radfequip</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">radfequip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_radfequip</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;radfequip&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radflight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set radiant heat fraction from electric light.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_radflight</span>

    <span class="nd">@radflight</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">radflight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_radflight</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;radflight&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_ubl1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set daytime urban boundary layer height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_ubl1</span>

    <span class="nd">@h_ubl1</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_ubl1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_ubl1</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_ubl1&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_ubl2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set nighttime urban boundary layer height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_ubl2</span>

    <span class="nd">@h_ubl2</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_ubl2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_ubl2</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_ubl2&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set inversion height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_ref</span>

    <span class="nd">@h_ref</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_ref</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_ref&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_temp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set temperature height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_temp</span>

    <span class="nd">@h_temp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_temp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_temp</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_temp&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_wind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set wind height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_wind</span>

    <span class="nd">@h_wind</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_wind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_wind</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_wind&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">c_circ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set wind scaling coefficient.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c_circ</span>

    <span class="nd">@c_circ</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">c_circ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_c_circ</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;c_circ&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">c_exch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set exchange velocity coefficient.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c_exch</span>

    <span class="nd">@c_exch</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">c_exch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_c_exch</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;c_exch&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxday</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set maximum heat flux threshold for daytime conditions [W/m].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxday</span>

    <span class="nd">@maxday</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">maxday</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxday</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;maxday&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxnight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set maximum heat flux threshold for nighttime conditions [W/m2].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxnight</span>

    <span class="nd">@maxnight</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">maxnight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxnight</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;maxnight&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">windmin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set minimum wind speed in m/s.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windmin</span>

    <span class="nd">@windmin</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">windmin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_windmin</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;windmin&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_obs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set rural average obstacle height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_obs</span>

    <span class="nd">@h_obs</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_obs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_obs</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;h_obs&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bldheight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average urban building height in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bldheight</span>

    <span class="nd">@bldheight</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">bldheight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bldheight</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;bldheight&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h_mix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of building HVAC waste heat released to street canyon.</span>

<span class="sd">        It is assumed the rest of building HVAC waste heat is released from the roof.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_mix</span>

    <span class="nd">@h_mix</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h_mix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h_mix</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;h_mix&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vertohor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set vertical-to-horizontal urban area ratio.</span>

<span class="sd">        The vertical-to-horizontal urban area ratio is calculated by dividing the</span>
<span class="sd">        urban facade area by total urban area.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertohor</span>

    <span class="nd">@vertohor</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vertohor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertohor</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;vertohor&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">charlength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set the urban characteristic length in meters.</span>

<span class="sd">        The characteristic length is the dimension of a square that encompasses the</span>
<span class="sd">        whole neighborhood.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_charlength</span>

    <span class="nd">@charlength</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">charlength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_charlength</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;charlength&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">albroad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set urban road albedo.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albroad</span>

    <span class="nd">@albroad</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">albroad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_albroad</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;albroad&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">droad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set thickness of urban road pavement thickness in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_droad</span>

    <span class="nd">@droad</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">droad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_droad</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;droad&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sensanth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set street level anthropogenic sensible heat [W/m2].</span>

<span class="sd">        Street level anthropogenic heat is non-building heat like heat emitted from cars,</span>
<span class="sd">        pedestrians, and street cooking.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sensanth</span>

    <span class="nd">@sensanth</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sensanth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sensanth</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;sensanth&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bld</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set list of building types, eras, and fractions of urban building stock.</span>

<span class="sd">        This property consists of a list of tuples, each containing a string for the the</span>
<span class="sd">        built era, and a number between 0 and 1, inclusive, defining built stock</span>
<span class="sd">        fraction, i.e (&#39;LargeOffice&#39;, &#39;New&#39;, 0.4). The fractions should sum to one.</span>

<span class="sd">        768 predefined models are built referencing 16 building types for 3 built eras</span>
<span class="sd">        and 16 climate zones according to models from the Department of Energy (DOE).</span>
<span class="sd">        Choose from the following text identifiers to reference a DOE building type:</span>

<span class="sd">        * &#39;fullservicerestaurant&#39;</span>
<span class="sd">        * &#39;hospital&#39;</span>
<span class="sd">        * &#39;largehotel&#39;</span>
<span class="sd">        * &#39;largeoffice&#39;</span>
<span class="sd">        * &#39;medoffice&#39;</span>
<span class="sd">        * &#39;midriseapartment&#39;</span>
<span class="sd">        * &#39;outpatient&#39;</span>
<span class="sd">        * &#39;primaryschool&#39;</span>
<span class="sd">        * &#39;quickservicerestaurant&#39;</span>
<span class="sd">        * &#39;secondaryschool&#39;</span>
<span class="sd">        * &#39;smallhotel&#39;</span>
<span class="sd">        * &#39;smalloffice&#39;</span>
<span class="sd">        * &#39;standaloneretail&#39;</span>
<span class="sd">        * &#39;stripmall&#39;</span>
<span class="sd">        * &#39;supermarket&#39;</span>
<span class="sd">        * &#39;warehouse&#39;</span>

<span class="sd">        Choose from the following built eras:</span>

<span class="sd">        * &#39;pre80&#39;</span>
<span class="sd">        * &#39;pst80&#39;</span>
<span class="sd">        * &#39;new&#39;</span>

<span class="sd">        Custom building types can also be referenced in this property. For example, a</span>
<span class="sd">        built stock consisting of 40% post-1980&#39;s large office, 30% new midrise</span>
<span class="sd">        apartment, and 30% of a pre-1980s custom building type (defined by the user)</span>
<span class="sd">        is referenced as follows:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            bld = [(&#39;largeoffice&#39;, &#39;pst80&#39;, 0.4),</span>
<span class="sd">                   (&#39;midriseapartment&#39;, &#39;new&#39;, 0.3),</span>
<span class="sd">                   (&#39;custombuilding&#39;, &#39;pre80&#39;, 0.3)]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bld</span>

    <span class="nd">@bld</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">bld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)),</span> <span class="s1">&#39;The bld property must be a list. &#39;</span> \
            <span class="s1">&#39;Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># check values and fraction sum.</span>
        <span class="n">total_frac</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">bld_row</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">bld_row</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Each bld tuple must contain three &#39;</span> \
                <span class="s1">&#39;items defining building type, era and fraction. Got &#39;</span> \
                <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> values.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bld_row</span><span class="p">))</span>

            <span class="n">bldtype</span><span class="p">,</span> <span class="n">builtera</span><span class="p">,</span> <span class="n">frac</span> <span class="o">=</span> \
                <span class="n">bld_row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bld_row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bld_row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bldtype</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;The first item in the &#39;</span> \
                <span class="s1">&#39;bld tuple must be text defining the reference building &#39;</span> \
                <span class="s1">&#39;type. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bldtype</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">builtera</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">builtera</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">REF_BUILTERA_SET</span><span class="p">,</span> \
                <span class="s1">&#39;The second item in the bld tuple must be text defining the built &#39;</span> \
                <span class="s1">&#39;era as one of </span><span class="si">{}</span><span class="s1">. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">REF_BUILTERA</span><span class="p">,</span> <span class="n">builtera</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">assert</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">frac</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;The third item in the bld tuple &#39;</span> \
                <span class="s1">&#39;must be a value between 0 and 1, inclusive, defining the &#39;</span> \
                <span class="s1">&#39;fraction of total built stock. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>
            <span class="n">total_frac</span> <span class="o">+=</span> <span class="n">frac</span>

        <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">total_frac</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-2</span><span class="p">,</span> <span class="s1">&#39;The sum of reference building &#39;</span> \
            <span class="s1">&#39;fractions defined in bld must equal one. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">total_frac</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bld</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lattree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of latent heat absorbed by urban trees.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lattree</span>

    <span class="nd">@lattree</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">lattree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lattree</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;lattree&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latgrss</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of latent heat absorbed by urban grass.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latgrss</span>

    <span class="nd">@latgrss</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">latgrss</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latgrss</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;latgrss&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">zone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set text representing an ASHRAE climate zone.</span>

<span class="sd">        This value is used to specify climate zone-specific construction, and</span>
<span class="sd">        HVAC parameters for the DOE reference building types. This will not effect</span>
<span class="sd">        the simulation if only custom reference buildings are used.</span>

<span class="sd">        Choose from the following:</span>

<span class="sd">        * &#39;1A&#39; - (i.e Miami)</span>
<span class="sd">        * &#39;1B&#39; - (i.e Kuwait)</span>
<span class="sd">        * &#39;2A&#39; - (i.e Houston)</span>
<span class="sd">        * &#39;2B&#39; - (i.e Phoenix)</span>
<span class="sd">        * &#39;3A&#39; - (i.e Atlanta)</span>
<span class="sd">        * &#39;3B-CA&#39; - (i.e Los Angeles)</span>
<span class="sd">        * &#39;3B&#39; - (i.e Las Vegas)</span>
<span class="sd">        * &#39;3C&#39; - (i.e San Francisco)</span>
<span class="sd">        * &#39;4A&#39; - (i.e Baltimore)</span>
<span class="sd">        * &#39;4B&#39; - (i.e Albuquerque)</span>
<span class="sd">        * &#39;4C&#39; - (i.e Seattle)</span>
<span class="sd">        * &#39;5A&#39; - (i.e Chicago)</span>
<span class="sd">        * &#39;5B&#39; - (i.e Boulder)</span>
<span class="sd">        * &#39;5C&#39; - (i.e Bremerton)</span>
<span class="sd">        * &#39;6A&#39; - (i.e Minneapolis)</span>
<span class="sd">        * &#39;6B&#39; - (i.e Helena)</span>
<span class="sd">        * &#39;7&#39; - (i.e Duluth)</span>
<span class="sd">        * &#39;8&#39; - (i.e Fairbanks)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zone</span>

    <span class="nd">@zone</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">zone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> \
            <span class="s1">&#39;zone must be a string. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">REF_ZONETYPE_SET</span><span class="p">,</span> <span class="s1">&#39;zone must be one of </span><span class="si">{}</span><span class="s1">. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">REF_ZONETYPE</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zone</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vegstart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set value from 1 to 12 for month at which vegetation starts to evapotranspire.</span>

<span class="sd">        This month corresponds to when the leaves of vegetation are assumed to be out.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vegstart</span>

    <span class="nd">@vegstart</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vegstart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vegstart</span> <span class="o">=</span> <span class="n">int_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;vegstart&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vegend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set value from 1 to 12 for month at which vegetation stops evapotranspiration.</span>

<span class="sd">        This month corresponds to when the leaves of vegetation are assumed to fall.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vegend</span>

    <span class="nd">@vegend</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vegend</span> <span class="o">=</span> <span class="n">int_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;vegend&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blddensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set building footprint density as fraction of urban area.</span>

<span class="sd">        The sum of blddensity, grasscover and treecover must be less than or equal to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blddensity</span>

    <span class="nd">@blddensity</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">blddensity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">vegcover</span> <span class="o">+</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;The sum of the blddensity, treecover &#39;</span>\
                <span class="s1">&#39; and grasscover ratios must be less than one. Got: </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">, &#39;</span> \
                <span class="s1">&#39;respectively.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grasscover</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># attributes haven&#39;t been set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_blddensity</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;blddensity&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">treecover</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of urban area covered in trees.</span>

<span class="sd">        The sum of blddensity, grasscover and treecover must be less than or equal to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_treecover</span>

    <span class="nd">@treecover</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">treecover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">grasscover</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span> <span class="o">+</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;The sum of the &#39;</span> \
                <span class="s1">&#39;blddensity, treecover and grasscover ratios must be less than one. &#39;</span> \
                <span class="s1">&#39;Got: </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">, respectively.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grasscover</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># attributes haven&#39;t been set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_treecover</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;treecover&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grasscover</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of urban area covered exclusively in grass.</span>

<span class="sd">        This value does not including grass under trees. The sum of blddensity,</span>
<span class="sd">        grasscover and treecover must be less than or equal to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grasscover</span>

    <span class="nd">@grasscover</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">grasscover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span> <span class="o">+</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;The sum of the &#39;</span> \
                <span class="s1">&#39;blddensity, treecover and grasscover ratios must be less than one. &#39;</span> \
                <span class="s1">&#39;Got: </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">, respectively.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># attributes haven&#39;t been set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grasscover</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;grasscover&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vegcover</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get fraction of urban ground covered by trees and grass.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">grasscover</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">albveg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set vegetation albedo.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albveg</span>

    <span class="nd">@albveg</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">albveg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_albveg</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;albveg&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rurvegcover</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of rural ground covered by vegetation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rurvegcover</span>

    <span class="nd">@rurvegcover</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rurvegcover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rurvegcover</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;rurvegcover&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kroad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set road pavement conductivity [W/mK].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kroad</span>

    <span class="nd">@kroad</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">kroad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kroad</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;kroad&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">croad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set road pavement volumetric heat capacity [J/m^3K].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_croad</span>

    <span class="nd">@croad</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">croad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_croad</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;croad&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">schtraffic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set matrix for schedule of fractional anthropogenic heat load.</span>

<span class="sd">        This property consists of a 3 x 24 matrix. Each row corresponding to a schedule</span>
<span class="sd">        for a weekday, Saturday, and Sunday, and each column corresponds to an hour in</span>
<span class="sd">        the day, for example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Weekday schedule</span>
<span class="sd">            wkday = [0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.7, 0.9, 0.9, 0.6, 0.6, 0.6, 0.6,</span>
<span class="sd">                     0.6, 0.7, 0.8, 0.9, 0.9, 0.8, 0.8, 0.7, 0.3, 0.2, 0.2]</span>
<span class="sd">            # Saturday schedule</span>
<span class="sd">            satday = [0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,</span>
<span class="sd">                     0.5, 0.6, 0.7, 0.7, 0.7, 0.7, 0.5, 0.4, 0.3, 0.2, 0.2]</span>
<span class="sd">            # Sunday schedule</span>
<span class="sd">            sunday = [0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4,</span>
<span class="sd">                     0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.3, 0.3, 0.2, 0.2]</span>

<span class="sd">            schtraffic = [wkday, satday, sunday]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schtraffic</span>

    <span class="nd">@schtraffic</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">schtraffic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">SchDef</span><span class="o">.</span><span class="n">check_week_validity</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;schtraffic&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_schtraffic</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

        <span class="c1"># Check column number and add value</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_schtraffic</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shgc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average building glazing Solar Heat Gain Coefficient.</span>

<span class="sd">        If value is None, a unique shgc is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shgc</span>

    <span class="nd">@shgc</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">shgc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shgc</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shgc</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;shgc&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">albroof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average building roof albedo.</span>

<span class="sd">        If value is None, a unique albroof is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albroof</span>

    <span class="nd">@albroof</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">albroof</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_albroof</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_albroof</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;albroof&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">glzr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average building glazing ratio.</span>

<span class="sd">        If value is None, a unique glzr is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_glzr</span>

    <span class="nd">@glzr</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">glzr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_glzr</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_glzr</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;glzr&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vegroof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set fraction of roofs covered in grass/shrubs.</span>

<span class="sd">        If value is None, a unique vegroof is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vegroof</span>

    <span class="nd">@vegroof</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">vegroof</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vegroof</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vegroof</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;vegroof&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">albwall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average building albedo.</span>

<span class="sd">        If value is None, a unique albwall is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_albwall</span>

    <span class="nd">@albwall</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">albwall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_albwall</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_albwall</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;albwall&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flr_h</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set average building floor height in meters.</span>

<span class="sd">        If value is None, a unique flr_h is set for each building from the refBEM.</span>
<span class="sd">        (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flr_h</span>

    <span class="nd">@flr_h</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">flr_h</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flr_h</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_flr_h</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;flr_h&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ref_bem_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of custom BEMDef objects to add to refBEM.</span>

<span class="sd">        If value is None, all BEMDef objects are referenced from the DOE typologies</span>
<span class="sd">        defined by default in the refBEM matrix. (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_bem_vector</span>

    <span class="nd">@ref_bem_vector</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">ref_bem_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_bem_vector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ref_bem_vector</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Cannot reset ref_bem_vector value.&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ref_sch_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of custom SchDef objects to add to refSchedule.</span>

<span class="sd">        If value is None, all SchDef objects are referenced from the DOE typologies</span>
<span class="sd">        defined by default in the refSch matrix. (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_sch_vector</span>

    <span class="nd">@ref_sch_vector</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">ref_sch_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_sch_vector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ref_sch_vector</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Cannot reset ref_sch_vector value.&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="UWG.to_dict">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.to_dict">[docs]</a>
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_refDOE</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;UWG dictionary representation.</span>

<span class="sd">        Args:</span>
<span class="sd">            add_refDOE: Optional boolean to include custom reference BEMDef and SchDef</span>
<span class="sd">                objects from the ref_bem_vector and ref_sch_vector attributes.</span>
<span class="sd">                (Default: False).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;UWG&#39;</span><span class="p">}</span>

        <span class="c1"># Add UWG parameters</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PARAMETER_LIST</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

        <span class="c1"># Add reference data</span>
        <span class="k">if</span> <span class="n">include_refDOE</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_bem_vector</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_sch_vector</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;ref_sch_vector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_sch_vector</span><span class="p">]</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;ref_bem_vector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_bem_vector</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">base</span></div>


<div class="viewcode-block" id="UWG.generate">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.generate">[docs]</a>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate all UWG objects after input parameters are set.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Cannot generate the UWG while epw_path is None.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_bem_vector</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customize_reference_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_epw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_compute_BEM</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_compute_input</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hvac_autosize</span><span class="p">()</span></div>


<div class="viewcode-block" id="UWG.simulate">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.simulate">[docs]</a>
    <span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simulate UWG object and produce urban canyon weather timeseries data.</span>

<span class="sd">        This function will set the following attributes in the UWG object:</span>

<span class="sd">        * N - Total number of hours in simulation</span>
<span class="sd">        * ph - Number of simulation time steps per hour</span>
<span class="sd">        * dayType - Number representing day type: Sunday, Saturday or Weekday</span>
<span class="sd">        * ceil_time_step - sim timestep fitted to weather file timestep</span>
<span class="sd">        * solar - SolarCalcs object for current timestep solar calculation</span>
<span class="sd">        * WeatherData - N x 1 output vector of forc object instance</span>
<span class="sd">        * UCMData - N x 1 output vector of UCM object instance</span>
<span class="sd">        * UBLData - N x 1 output vector of UBL object instance</span>
<span class="sd">        * RSMData - N x 1 output vector of RSM object instace</span>
<span class="sd">        * USMData - N x 1 output vector of USM object instance</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># total number of hours in simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">days</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># weather time step counter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">dt</span> <span class="o">/</span> <span class="mf">3600.</span>  <span class="c1"># dt (simulation time step) in hours</span>

        <span class="c1"># Data dump variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">WeatherData</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UBLData</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RSMData</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">USMData</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)]</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Simulating new temperature and humidity values for &#39;</span>
              <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> days from </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nday</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">))</span>

        <span class="c1"># iterate through every simulation time-step (i.e 5 min) defined by UWG</span>
        <span class="n">day_step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ph</span><span class="p">)</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">nt</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">it</span> <span class="o">%</span> <span class="n">day_step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Simulating Day </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">it</span> <span class="o">/</span> <span class="n">day_step</span><span class="p">)))</span>
            <span class="c1"># Update water temperature (estimated)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="c1"># for BUBBLE/CAPITOUL/Singapore only</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">deepTemp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">temp</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">temp</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">waterTemp</span> <span class="o">=</span> \
                    <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">temp</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">temp</span><span class="p">))</span> <span class="o">-</span> <span class="mf">10.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># soil temperature by depth, by month</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">deepTemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tsoil</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_soilindex1</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">waterTemp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tsoil</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

            <span class="c1"># There&#39;s probably a better way to update the weather...</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">update_date</span><span class="p">()</span>

            <span class="c1"># simulation time increment raised to weather time step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">it</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ph</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="c1"># minus one to be consistent with forcIP list index</span>
            <span class="c1"># Updating forcing instance</span>
            <span class="c1"># horizontal Infrared Radiation Intensity (W m-2)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">infra</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">infra</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># wind speed (m s-1)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">wind</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">wind</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">],</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="o">.</span><span class="n">windMin</span><span class="p">)</span>
            <span class="c1"># wind direction</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">uDir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">uDir</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># specific humidty (kg kg-1)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">hum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">hum</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># Pressure (Pa)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">pres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">pres</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># air temp (C)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">temp</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">rHum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">rHum</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>  <span class="c1"># RH (%)</span>
            <span class="c1"># Precip (mm h-1)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">prec</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># horizontal solar diffuse radiation (W m-2)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">dif</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">dif</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># normal solar direct radiation (W m-2)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span><span class="o">.</span><span class="n">dir</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ceil_time_step</span><span class="p">]</span>
            <span class="c1"># Canyon humidity (absolute) same as rural</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">canHum</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">hum</span><span class="p">)</span>

            <span class="c1"># Update solar flux</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solar</span> <span class="o">=</span> <span class="n">SolarCalcs</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solar</span><span class="o">.</span><span class="n">solarcalcs</span><span class="p">()</span>

            <span class="c1"># Update building &amp; traffic schedule</span>
            <span class="c1"># Assign day type (1 = weekday, 2 = sat, 3 = sun/other)</span>
            <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">is_near_zero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">julian</span> <span class="o">%</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dayType</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># Sunday</span>
            <span class="k">elif</span> <span class="n">utilities</span><span class="o">.</span><span class="n">is_near_zero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">julian</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">-</span> <span class="mf">6.</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dayType</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Saturday</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dayType</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Weekday</span>

            <span class="c1"># Update anthropogenic heat load for each hour (building &amp; UCM)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">sensAnthrop</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">sensanth</span> <span class="o">*</span> \
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schtraffic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dayType</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">hourDay</span><span class="p">])</span>

            <span class="c1"># Update the energy components for building types defined in initialize.UWG</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">)):</span>

                <span class="n">di</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dayType</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="n">hi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">hourDay</span>

                <span class="c1"># Set temperature</span>

                <span class="c1"># add from temperature schedule for cooling</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">cool_setpoint_day</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">cool</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span> <span class="o">+</span> <span class="mf">273.15</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">cool_setpoint_night</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">cool_setpoint_day</span>
                <span class="c1"># add from temperature schedule for heating</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">heat_setpoint_day</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">heat</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span> <span class="o">+</span> <span class="mf">273.15</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">heat_setpoint_night</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">heat_setpoint_day</span>

                <span class="c1"># Internal Heat Load Schedule (W/m^2 of floor area for Q)</span>

                <span class="c1"># Qelec x elec fraction for day</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">elec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">q_elec</span> <span class="o">*</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">elec</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span>
                <span class="c1"># Qlight x light fraction for day</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">light</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">q_light</span> <span class="o">*</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">light</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span>
                <span class="c1"># Number of occupants x occ fraction for day</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Nocc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">n_occ</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">occ</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span>
                <span class="c1"># Sensible Q occ * fraction occ sensible Q * number of occ</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Qocc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensocc</span> <span class="o">*</span> \
                    <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">latfocc</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Nocc</span>

                <span class="c1"># SWH and ventilation schedule</span>

                <span class="c1"># L/hr/m2 x SWH fraction for day</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">swh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">v_swh</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">swh</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span>
                <span class="c1"># m^3/s/m^2 x Vent fraction for day</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">vent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">vent</span>
                <span class="c1"># Gas Equip Schedule, per m^2 of floor</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">gas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">q_gas</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">gas</span><span class="p">[</span><span class="n">di</span><span class="p">][</span><span class="n">hi</span><span class="p">]</span>

                <span class="c1"># This is quite messy, should update</span>
                <span class="c1"># Update internal heat and corresponding fractional loads</span>
                <span class="n">intHeat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">light</span> <span class="o">+</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">elec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Qocc</span>
                <span class="c1"># W/m2 from light, electricity, occupants</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">int_heat_day</span> <span class="o">=</span> <span class="n">intHeat</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">int_heat_night</span> <span class="o">=</span> <span class="n">intHeat</span>
                <span class="c1"># fraction of radiant heat from light/equipment of whole internal heat</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">int_heat_f_rad</span> <span class="o">=</span> \
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radflight</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">light</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radfequip</span> <span class="o">*</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">elec</span><span class="p">)</span> <span class="o">/</span> <span class="n">intHeat</span>

                <span class="c1"># fraction of latent heat (from occupants) of whole internal heat</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">int_heat_flat</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">latfocc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensocc</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Nocc</span> <span class="o">/</span> <span class="n">intHeat</span>

                <span class="c1"># Update envelope temperature layers</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T_wallex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T_wallin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T_roofex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T_roofin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># Update rural heat fluxes &amp; update vertical diffusion model (VDM)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">infra</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">infra</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">emissivity</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">SIGMA</span> <span class="o">*</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mf">4.</span>    <span class="c1"># Infrared radiation from rural road</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">SurfFlux</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">hum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">temp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">wind</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="o">.</span><span class="n">vdm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">)</span>

            <span class="c1"># Calculate urban heat fluxes, update UCM &amp; UBL</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span> <span class="o">=</span> <span class="n">urbflux</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">UCModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="o">.</span><span class="n">ublTemp</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="o">.</span><span class="n">ublmodel</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">)</span>

            <span class="c1"># Experimental code to run diffusion model in the urban area</span>
            <span class="c1"># N.B Commented out in python UWG because computed wind speed in urban</span>
            <span class="c1"># VDM: y = =0.84 * ln((2 - x / 20) / 0.51) results in negative log for</span>
            <span class="c1"># building heights &gt;= 40m.</span>

            <span class="c1"># Uroad = copy.copy(self.UCM.road)</span>
            <span class="c1"># Uroad.sens = copy.copy(self.UCM.sensHeat)</span>
            <span class="c1"># Uforc = copy.copy(self.forc)</span>
            <span class="c1"># Uforc.wind = copy.copy(self.UCM.canWind)</span>
            <span class="c1"># Uforc.temp = copy.copy(self.UCM.canTemp)</span>
            <span class="c1"># self.USM.VDM(Uforc,Uroad,self.geoParam,self.simTime)</span>

            <span class="n">istimestep</span> <span class="o">=</span> <span class="n">utilities</span><span class="o">.</span><span class="n">is_near_zero</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">secDay</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timePrint</span><span class="p">,</span> <span class="mf">1e-10</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">istimestep</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">WeatherData</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="p">)</span>
                <span class="n">_Tdb</span><span class="p">,</span> <span class="n">_w</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">canRHum</span><span class="p">,</span> <span class="n">_h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">Tdp</span><span class="p">,</span> <span class="n">_v</span> <span class="o">=</span> <span class="n">psychrometrics</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">canTemp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">canHum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">forc</span><span class="o">.</span><span class="n">pres</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">UBLData</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">RSMData</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="p">)</span>

                <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="UWG.write_epw">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.write_epw">[docs]</a>
    <span class="k">def</span> <span class="nf">write_epw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write new EPW file to new_epw_path property.&quot;&quot;&quot;</span>

        <span class="n">epw_prec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">epw_precision</span>  <span class="c1"># precision of epw file input</span>

        <span class="k">for</span> <span class="n">iJ</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span><span class="p">)):</span>
            <span class="c1"># [iJ+self.simTime.timeInitial-8] - increments along weather timestep in epw</span>
            <span class="c1"># [6 to 21]                       - column data of epw</span>

            <span class="c1"># dry bulb temperature  [C]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">iJ</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeInitial</span> <span class="o">-</span> <span class="mi">8</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;{0:.</span><span class="si">{1}</span><span class="s1">f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span><span class="p">[</span><span class="n">iJ</span><span class="p">]</span><span class="o">.</span><span class="n">canTemp</span> <span class="o">-</span> <span class="mf">273.15</span><span class="p">,</span> <span class="n">epw_prec</span><span class="p">)</span>
            <span class="c1"># dew point temperature [?C]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">iJ</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeInitial</span> <span class="o">-</span> <span class="mi">8</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;{0:.</span><span class="si">{1}</span><span class="s1">f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span><span class="p">[</span><span class="n">iJ</span><span class="p">]</span><span class="o">.</span><span class="n">Tdp</span><span class="p">,</span> <span class="n">epw_prec</span><span class="p">)</span>
            <span class="c1"># relative humidity     [%]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">iJ</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeInitial</span> <span class="o">-</span> <span class="mi">8</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;{0:.</span><span class="si">{1}</span><span class="s1">f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCMData</span><span class="p">[</span><span class="n">iJ</span><span class="p">]</span><span class="o">.</span><span class="n">canRHum</span><span class="p">,</span> <span class="n">epw_prec</span><span class="p">)</span>
            <span class="c1"># wind speed [m/s]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">iJ</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeInitial</span> <span class="o">-</span> <span class="mi">8</span><span class="p">][</span><span class="mi">21</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;{0:.</span><span class="si">{1}</span><span class="s1">f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">WeatherData</span><span class="p">[</span><span class="n">iJ</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span><span class="p">,</span> <span class="n">epw_prec</span><span class="p">)</span>

        <span class="c1"># Writing new EPW file</span>
        <span class="n">epw_new_id</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_epw_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
            <span class="n">new_epw_line</span> <span class="o">=</span> \
                <span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_header</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">epw_new_id</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_epw_line</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">)):</span>
            <span class="n">printme</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">ei</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
                <span class="n">printme</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">ei</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span>
            <span class="n">printme</span> <span class="o">=</span> <span class="n">printme</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">ei</span><span class="p">])</span>
            <span class="n">new_epw_line</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">printme</span><span class="p">)</span>
            <span class="n">epw_new_id</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_epw_line</span><span class="p">)</span>

        <span class="n">epw_new_id</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;New climate file is generated at </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">new_epw_path</span><span class="p">))</span></div>


    <span class="k">def</span> <span class="nf">_read_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the parameter input file (.uwg file) and set as UWG attributes.&quot;&quot;&quot;</span>

        <span class="c1"># Open .UWG file and feed csv data to initializeDataFile</span>
        <span class="n">param_data</span> <span class="o">=</span> <span class="n">utilities</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">param_path</span><span class="p">)</span>

        <span class="c1"># The initialize.UWG is read with a dictionary so that users changing</span>
        <span class="c1"># line endings or line numbers doesn&#39;t make reading input incorrect</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_data</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">param_data</span><span class="p">[</span><span class="n">count</span><span class="p">]</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>

            <span class="c1"># optional parameters might be empty so handle separately</span>
            <span class="n">is_optional_parameter</span> <span class="o">=</span> \
                <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OPTIONAL_PARAMETER_SET</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span>
                    <span class="n">row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="s1">&#39;#&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;schtraffic&#39;</span><span class="p">:</span>
                    <span class="c1"># SchTraffic: 3 x 24 matrix</span>
                    <span class="n">trafficrows</span> <span class="o">=</span> <span class="n">param_data</span><span class="p">[</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">count</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> \
                        <span class="p">[</span><span class="n">utilities</span><span class="o">.</span><span class="n">str2fl</span><span class="p">(</span><span class="n">r</span><span class="p">[:</span><span class="mi">24</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">trafficrows</span><span class="p">]</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">4</span>
                <span class="k">elif</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bld&#39;</span><span class="p">:</span>
                    <span class="c1"># bld: list of (bldtype, builtera, frac)</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">bld</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">nextrow</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                               <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">param_data</span><span class="p">[</span><span class="n">count</span><span class="p">]]</span>
                    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">nextrow</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">nextrow</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">REF_BLDTYPE_SET</span><span class="p">:</span>
                        <span class="n">bldtype</span><span class="p">,</span> <span class="n">builtera</span><span class="p">,</span> <span class="n">frac</span> <span class="o">=</span> <span class="n">nextrow</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nextrow</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">nextrow</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">bld</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bldtype</span><span class="p">,</span> <span class="n">builtera</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">frac</span><span class="p">)))</span>
                        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">nextrow</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                                   <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">param_data</span><span class="p">[</span><span class="n">count</span><span class="p">]]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bld</span>
                <span class="k">elif</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;zone&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">is_optional_parameter</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span>
                        <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error while reading parameter at row </span><span class="si">{}</span><span class="s1">. Got: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">count</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>

        <span class="c1"># Set UWG parameters</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PARAMETER_LIST</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">,</span> <span class="s1">&#39;The </span><span class="si">{}</span><span class="s1"> attribute is not defined in &#39;</span> \
                <span class="s1">&#39;the </span><span class="si">{}</span><span class="s1"> parameter file.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">attr</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">param_path</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_param_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_read_epw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read EPW file and sets corresponding UWG weather and site properties.</span>

<span class="sd">        This function will set the following attributes in the UWG object:</span>

<span class="sd">        * epwinput - EPW weather data as list</span>
<span class="sd">        * lat - latitude from EPW header</span>
<span class="sd">        * lon - longitude from EPW header</span>
<span class="sd">        * gmt - Greenwich Mean Time from EPW header</span>
<span class="sd">        * nSoil - Number of soil depths from EPW header</span>
<span class="sd">        * Tsoil - nSoil x 12 matrix for soil temperture from EPW header[1]</span>
<span class="sd">        * depth_soil - nSoil x 1 matrix for soil depth from EPW header[1]</span>
<span class="sd">        * new_epw_path - file path to modified EPW file</span>

<span class="sd">        Note:</span>
<span class="sd">            [1] EPW CSV Format (In/Out). Retrieved August 26, 2020,</span>
<span class="sd">            from https://bigladdersoftware.com/epx/docs/8-2/auxiliary-programs/epw-csv-format-inout.html</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Open epw file and feed csv data to climate_data</span>
        <span class="n">climate_data</span> <span class="o">=</span> <span class="n">utilities</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span><span class="p">)</span>

        <span class="c1"># Read header lines (1 to 8) from EPW and ensure TMY2 format.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_header</span> <span class="o">=</span> <span class="n">climate_data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>

        <span class="c1"># Read weather data from EPW for each time step in weather file. (lines 8 - end)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epwinput</span> <span class="o">=</span> <span class="n">climate_data</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>

        <span class="c1"># Read Lat, Long (line 1 of EPW)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">7</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gmt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_header</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">8</span><span class="p">])</span>

        <span class="c1"># Read in soil temperature data (assumes this is always there)</span>
        <span class="n">soilData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_header</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="c1"># Number of ground temperature depths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">soilData</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="c1"># nSoil x 12 matrix for soil temperture (K)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tsoil</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">)]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span><span class="p">)]</span>
        <span class="c1"># nSoil x 1 matrix for soil depth (m)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span><span class="p">)]</span>

        <span class="c1"># Read monthly data for each layer of soil from EPW file</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span><span class="p">):</span>
            <span class="c1"># get soil depth for each nSoil</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">soilData</span><span class="p">[</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">16</span><span class="p">)])</span>
            <span class="c1"># monthly data</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
                <span class="c1"># 12 months of soil T for specific depth</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Tsoil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">soilData</span><span class="p">[</span><span class="mi">6</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">16</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="mf">273.15</span>

    <span class="k">def</span> <span class="nf">_compute_BEM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Define BEMDef objects for each archetype defined in the bld matrix.</span>

<span class="sd">        This function will set the following attributes in the UWG object:</span>

<span class="sd">        * r_glaze_total - Area-weighted average of glazing ratio from urban building</span>
<span class="sd">            stock [Km/W].</span>
<span class="sd">        * SHGC_total - Area-weighted average of SHGC from urban building stock.</span>
<span class="sd">        * alb_wall_total - Area-weighted average of wall albedo from urban building</span>
<span class="sd">            stock.</span>
<span class="sd">        * BEM - list of BEMDef objects extracted from readDOE</span>
<span class="sd">        * Sch - list of Schedule objects extracted from readDOE</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Define building energy models</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r_glaze_total</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SHGC_total</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alb_wall_total</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="n">h_floor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flr_h</span> <span class="ow">or</span> <span class="mf">3.05</span>  <span class="c1"># average floor height</span>

        <span class="n">total_urban_bld_area</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">charlength</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span> <span class="o">*</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">bldheight</span> <span class="o">/</span> <span class="n">h_floor</span>  <span class="c1"># total building floor area</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of BEMDef objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of Schedule objects</span>

        <span class="c1"># Modify zone to be used as python index</span>
        <span class="n">bld_z</span> <span class="o">=</span> <span class="s1">&#39;1A&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span> <span class="o">==</span> <span class="s1">&#39;1B&#39;</span> <span class="k">else</span> <span class="s1">&#39;5B&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span> <span class="o">==</span> <span class="s1">&#39;5C&#39;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span>
        <span class="n">zone_idx</span> <span class="o">=</span> <span class="n">REF_ZONETYPE</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">bld_z</span><span class="p">)</span>

        <span class="c1"># Build unique key based on bldtype and builtera strings</span>
        <span class="n">bld_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">bldg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bldg</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="p">(</span><span class="n">bldg</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">REF_BUILTERA</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">bldg</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">bldg</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bld</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">)):</span>  <span class="c1"># ~16 building types (more w/ custom refs)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>  <span class="c1"># ~ 3 built eras</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="c1"># when add custom types some matrix elements are None</span>
                    <span class="k">continue</span>

                <span class="n">ref_key</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bldtype</span> <span class="o">+</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">builtera</span>
                <span class="k">if</span> <span class="n">ref_key</span> <span class="ow">in</span> <span class="n">bld_dict</span><span class="p">:</span>
                    <span class="c1"># Add to BEM list</span>
                    <span class="n">bldtype</span><span class="p">,</span> <span class="n">builtera_idx</span><span class="p">,</span> <span class="n">frac</span> <span class="o">=</span> <span class="n">bld_dict</span><span class="p">[</span><span class="n">ref_key</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">builtera_idx</span><span class="p">][</span><span class="n">zone_idx</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">frac</span> <span class="o">=</span> <span class="n">frac</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">fl_area</span> <span class="o">=</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">total_urban_bld_area</span>

                    <span class="c1"># Overwrite with optional parameters if provided</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">glzr</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">glazing_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glzr</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">albroof</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">albedo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">albroof</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vegroof</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">vegcoverage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vegroof</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shgc</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">shgc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shgc</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">albwall</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">albedo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">albwall</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flr_h</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">floor_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flr_h</span>

                    <span class="c1"># Keep track of total urban r_glaze, SHGC, and alb_wall for UCM model</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">r_glaze_total</span> <span class="o">+=</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">frac</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">glazing_ratio</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SHGC_total</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">frac</span> <span class="o">*</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">shgc</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">alb_wall_total</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">frac</span> <span class="o">*</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">albedo</span>
                    <span class="c1"># Add to schedule list</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Sch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">refSchedule</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">builtera_idx</span><span class="p">][</span><span class="n">zone_idx</span><span class="p">])</span>
                    <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">_compute_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create input objects from user-defined parameters.</span>

<span class="sd">        This function will set the following input objects as attributes in the UWG</span>
<span class="sd">        object:</span>

<span class="sd">        * simTime - SimParam object for time parameters</span>
<span class="sd">        * weather - Weather object for weather data</span>
<span class="sd">        * forcIP - Forcing object to estimate deep ground/water temperature</span>
<span class="sd">        * forc - empty Forcing object to estimate deep ground/water temperature</span>
<span class="sd">        * RSM - RSMDef object for rural site and vertical diffusion model</span>
<span class="sd">        * USM - RSMDef object for urban site and vertical diffusion model</span>
<span class="sd">        * geoParam - Param object for geographic parameters</span>
<span class="sd">        * UBL - UBL object for urban boundary layer model</span>
<span class="sd">        * UCM - UCMDef object for urban canopy model</span>
<span class="sd">        * road - Element object for urban road</span>
<span class="sd">        * rural - Element object for rural road</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span> <span class="o">=</span> <span class="n">SimParam</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtsim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtweather</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nday</span><span class="p">)</span>  <span class="c1"># simulation time parameters</span>

        <span class="c1"># weather file data for simulation time period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weather</span> <span class="o">=</span> <span class="n">Weather</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeInitial</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="o">.</span><span class="n">timeFinal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forcIP</span> <span class="o">=</span> <span class="n">Forcing</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staTemp</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="p">)</span>  <span class="c1"># init Forcing obj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forc</span> <span class="o">=</span> <span class="n">Forcing</span><span class="p">()</span>  <span class="c1"># empty Forcing obj</span>

        <span class="c1"># Initialize geographic Param and Urban Boundary Layer Objects</span>
        <span class="n">nightStart</span> <span class="o">=</span> <span class="mf">18.</span>  <span class="c1"># arbitrary values for begin/end hour for night setpoint</span>
        <span class="n">nightEnd</span> <span class="o">=</span> <span class="mf">8.</span>
        <span class="n">maxdx</span> <span class="o">=</span> <span class="mf">250.</span>  <span class="c1"># max dx (m)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">h_ubl1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_ubl2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_ref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_temp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_wind</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_circ</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxday</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxnight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lattree</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latgrss</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">albveg</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vegstart</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vegend</span><span class="p">,</span> <span class="n">nightStart</span><span class="p">,</span> <span class="n">nightEnd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">windmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">WGMAX</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c_exch</span><span class="p">,</span> <span class="n">maxdx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">G</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CP</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">R</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">RV</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LV</span><span class="p">,</span>
            <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SIGMA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">WATERDENS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LVTT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ESTT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CL</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CPV</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CM</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">COLBURN</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">UBL</span> <span class="o">=</span> <span class="n">UBLDef</span><span class="p">(</span>
            <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">charlength</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">maxdx</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="o">.</span><span class="n">dayBLHeight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="o">.</span><span class="n">nightBLHeight</span><span class="p">)</span>

        <span class="c1"># Defining road</span>
        <span class="n">emis</span> <span class="o">=</span> <span class="mf">0.93</span>
        <span class="n">asphalt</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kroad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">croad</span><span class="p">,</span> <span class="s1">&#39;asphalt&#39;</span><span class="p">)</span>
        <span class="n">road_T_init</span> <span class="o">=</span> <span class="mf">293.</span>
        <span class="n">road_horizontal</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1"># fraction of vegetation (tree &amp; grass) coverage on unbuilt surface</span>
        <span class="n">road_veg_coverage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vegcover</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">)</span> 
        <span class="n">road_grass_coverage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grasscover</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">)</span>
        <span class="n">road_tree_coverage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">)</span>

        <span class="c1"># define road layers</span>
        <span class="n">road_layer_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">droad</span> <span class="o">/</span> <span class="mf">0.05</span><span class="p">))</span>
        <span class="c1"># 0.5/0.05 ~ 10 x 1 matrix of 0.05 thickness</span>
        <span class="n">thickness_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.05</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">road_layer_num</span><span class="p">)]</span>
        <span class="n">material_vector</span> <span class="o">=</span> <span class="p">[</span><span class="n">asphalt</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">road_layer_num</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">road</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">albroad</span><span class="p">,</span> <span class="n">emis</span><span class="p">,</span> <span class="n">thickness_vector</span><span class="p">,</span> <span class="n">material_vector</span><span class="p">,</span> <span class="n">road_veg_coverage</span><span class="p">,</span>
            <span class="n">road_T_init</span><span class="p">,</span> <span class="n">road_horizontal</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;urban_road&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">treecoverage</span> <span class="o">=</span> <span class="n">road_tree_coverage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">grasscoverage</span> <span class="o">=</span> <span class="n">road_grass_coverage</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rural</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">albroad</span><span class="p">,</span> <span class="n">emis</span><span class="p">,</span> <span class="n">thickness_vector</span><span class="p">,</span> <span class="n">material_vector</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rurvegcover</span><span class="p">,</span>
            <span class="n">road_T_init</span><span class="p">,</span> <span class="n">road_horizontal</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;rural_road&#39;</span><span class="p">)</span>

        <span class="c1"># Reference site class (also include VDM)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RSM</span> <span class="o">=</span> <span class="n">RSMDef</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_obs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staPres</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z_MESO_PATH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">USM</span> <span class="o">=</span> <span class="n">RSMDef</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bldheight</span> <span class="o">/</span>
            <span class="mf">10.</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staPres</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Z_MESO_PATH</span><span class="p">)</span>

        <span class="n">T_init</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">H_init</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staHum</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">wind_init</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">staUmod</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span> <span class="o">=</span> <span class="n">UCMDef</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bldheight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blddensity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertohor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">treecover</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensanth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latanth</span><span class="p">,</span> <span class="n">T_init</span><span class="p">,</span> <span class="n">H_init</span><span class="p">,</span> <span class="n">wind_init</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_glaze_total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SHGC_total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alb_wall_total</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="o">.</span><span class="n">h_mix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">h_mix</span>

        <span class="c1"># Define Road Element &amp; buffer to match ground temperature depth</span>
        <span class="n">roadMat</span><span class="p">,</span> <span class="n">newthickness</span> <span class="o">=</span> <span class="n">UWG</span><span class="o">.</span><span class="n">_procmat</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXTHICKNESS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MINTHICKNESS</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span><span class="p">):</span>
            <span class="c1"># if soil depth is greater then the thickness of the road</span>
            <span class="c1"># we add new slices of soil at max thickness until road is greater or equal</span>

            <span class="n">is_soildepth_equal</span> <span class="o">=</span> <span class="n">utilities</span><span class="o">.</span><span class="n">is_near_zero</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">),</span> <span class="mf">1e-15</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">is_soildepth_equal</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">)):</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">):</span>
                    <span class="n">newthickness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MAXTHICKNESS</span><span class="p">)</span>
                    <span class="n">roadMat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOIL</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_soilindex1</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">road</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">albedo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">emissivity</span><span class="p">,</span> <span class="n">newthickness</span><span class="p">,</span> <span class="n">roadMat</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">vegcoverage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">road</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Define Rural Element</span>
        <span class="n">ruralMat</span><span class="p">,</span> <span class="n">newthickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_procmat</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXTHICKNESS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MINTHICKNESS</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nSoil</span><span class="p">):</span>
            <span class="c1"># if soil depth is greater then the thickness of the road</span>
            <span class="c1"># we add new slices of soil at max thickness until road is greater or equal</span>

            <span class="n">is_soildepth_equal</span> <span class="o">=</span> <span class="n">utilities</span><span class="o">.</span><span class="n">is_near_zero</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">),</span> <span class="mf">1e-15</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">is_soildepth_equal</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">)):</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth_soil</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">newthickness</span><span class="p">):</span>
                    <span class="n">newthickness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MAXTHICKNESS</span><span class="p">)</span>
                    <span class="n">ruralMat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOIL</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_soilindex2</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rural</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">albedo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">emissivity</span><span class="p">,</span> <span class="n">newthickness</span><span class="p">,</span> <span class="n">ruralMat</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">vegcoverage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">layerTemp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rural</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_hvac_autosize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;HVAC autosizing (unlimited cooling &amp; heating) in BEM objects.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autosize</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">coolcap</span> <span class="o">=</span> <span class="mf">9999.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">building</span><span class="o">.</span><span class="n">heat_cap</span> <span class="o">=</span> <span class="mf">9999.</span>

    <span class="k">def</span> <span class="nf">_check_reference_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">ref_sch_vector</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check validity of reference BEMDef and SchDef lists.</span>

<span class="sd">        Args:</span>
<span class="sd">            ref_bem_vector: List of custom BEMDef objects to override or add to</span>
<span class="sd">                the refBEM matrix according to the BEMDef bldtype and builtera values.</span>
<span class="sd">            ref_sch_vector: List of custom SchDef objects to override or add to</span>
<span class="sd">                the refSchedule matrix according to the SchDef bldtype and builtera</span>
<span class="sd">                values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple consisting of validated ref_bem_vector and ref_sch_vector.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check for null vector</span>
        <span class="k">if</span> <span class="n">ref_bem_vector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_sch_vector</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_bem_vector</span><span class="p">),</span> <span class="s1">&#39;The &#39;</span> \
            <span class="s1">&#39;ref_sch_vector and ref_bem_vector properties must be lists of equal &#39;</span> \
            <span class="s1">&#39;length. Got lengths </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">, respectively.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">ref_sch_vector</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_bem_vector</span><span class="p">))</span>

        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">SchDef</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ref_sch_vector</span><span class="p">),</span> <span class="s1">&#39;All items in the &#39;</span> \
            <span class="s1">&#39;ref_sch_vector must be a SchDef object.&#39;</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">BEMDef</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ref_bem_vector</span><span class="p">),</span> <span class="s1">&#39;All items in the &#39;</span> \
            <span class="s1">&#39;ref_bem_vector must be a BEMDef object.&#39;</span>

        <span class="k">for</span> <span class="n">ref_bem</span><span class="p">,</span> <span class="n">ref_sch</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">ref_sch_vector</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">ref_bem</span><span class="o">.</span><span class="n">bldtype</span> <span class="o">==</span> <span class="n">ref_sch</span><span class="o">.</span><span class="n">bldtype</span><span class="p">,</span> <span class="s1">&#39;The bldtype for &#39;</span> \
                <span class="s1">&#39;corresponding items in ref_bem_vector and ref_sch_vector must be the &#39;</span> \
                <span class="s1">&#39;same. Got </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ref_bem</span><span class="o">.</span><span class="n">bldtype</span><span class="p">,</span> <span class="n">ref_sch</span><span class="o">.</span><span class="n">bldtype</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">ref_bem</span><span class="o">.</span><span class="n">builtera</span> <span class="o">==</span> <span class="n">ref_sch</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="s1">&#39;The builtera for &#39;</span> \
                <span class="s1">&#39;corresponding items in ref_bem_vector and ref_sch_vector must be the &#39;</span> \
                <span class="s1">&#39;same. Got </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">ref_bem</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="n">ref_sch</span><span class="o">.</span><span class="n">builtera</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ref_bem_vector</span><span class="p">,</span> <span class="n">ref_sch_vector</span>

    <span class="k">def</span> <span class="nf">_customize_reference_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Customize refBEM and refSchedule data by extending or overriding DOE reference data.</span>

<span class="sd">        The custom BEMDef and SchDef objects must contain bldtype and builtera</span>
<span class="sd">        identifiers referencing a nonzero fraction of urban area in the UWG bld property</span>
<span class="sd">        to be used in the UWG model. Also note that this method should be used before</span>
<span class="sd">        calling the generate method, in order to ensure the reference data gets</span>
<span class="sd">        transferred over to the UWG object BEM and Schedule properties.</span>

<span class="sd">        Args:</span>
<span class="sd">            ref_bem_vector: List of custom BEMDef objects to override or add to</span>
<span class="sd">                the refBEM matrix according to the BEMDef bldtype and builtera values.</span>
<span class="sd">            ref_sch_vector: List of custom SchDef objects to override or add to</span>
<span class="sd">                the refSchedule matrix according to the SchDef bldtype and builtera</span>
<span class="sd">                values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bld_z</span> <span class="o">=</span> <span class="s1">&#39;1A&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span> <span class="o">==</span> <span class="s1">&#39;1B&#39;</span> <span class="k">else</span> <span class="s1">&#39;5B&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span> <span class="o">==</span> <span class="s1">&#39;5C&#39;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone</span>
        <span class="n">zi</span> <span class="o">=</span> <span class="n">REF_ZONETYPE</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">bld_z</span><span class="p">)</span>
        <span class="c1"># Insert or extend refSchedule matrix</span>
        <span class="k">for</span> <span class="n">sch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_sch_vector</span><span class="p">:</span>
            <span class="n">ei</span> <span class="o">=</span> <span class="n">REF_BUILTERA</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">sch</span><span class="o">.</span><span class="n">builtera</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ti</span> <span class="o">=</span> <span class="n">REF_BLDTYPE</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">sch</span><span class="o">.</span><span class="n">bldtype</span><span class="p">)</span>  <span class="c1"># will fail if custom type</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Overwrite DOE reference schedule &quot;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&quot; &#39;</span>
                      <span class="s1">&#39;with custom schedule.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sch</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="n">sch</span><span class="o">.</span><span class="n">bldtype</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># Add new rows based on type index in object</span>
                <span class="n">ti</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refSchedule</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refSchedule</span><span class="o">.</span><span class="n">append</span><span class="p">([[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)]</span>
                                         <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Add custom schedule for &quot;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">sch</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="n">sch</span><span class="o">.</span><span class="n">bldtype</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refSchedule</span><span class="p">[</span><span class="n">ti</span><span class="p">][</span><span class="n">ei</span><span class="p">][</span><span class="n">zi</span><span class="p">]</span> <span class="o">=</span> <span class="n">sch</span>

        <span class="c1"># Insert or extend refBEM matrix</span>
        <span class="k">for</span> <span class="n">bem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref_bem_vector</span><span class="p">:</span>
            <span class="n">ei</span> <span class="o">=</span> <span class="n">REF_BUILTERA</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">bem</span><span class="o">.</span><span class="n">builtera</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ti</span> <span class="o">=</span> <span class="n">REF_BLDTYPE</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">bem</span><span class="o">.</span><span class="n">bldtype</span><span class="p">)</span>  <span class="c1"># will fail if custom type</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Overwrite DOE reference BEM &quot;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&quot; &#39;</span>
                      <span class="s1">&#39;with custom schedule.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bem</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="n">bem</span><span class="o">.</span><span class="n">bldtype</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># Add new rows based on type index in object</span>
                <span class="n">ti</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="o">.</span><span class="n">append</span><span class="p">([[</span><span class="kc">None</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)]</span>
                                    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Add custom bem for &quot;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">bem</span><span class="o">.</span><span class="n">builtera</span><span class="p">,</span> <span class="n">bem</span><span class="o">.</span><span class="n">bldtype</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refBEM</span><span class="p">[</span><span class="n">ti</span><span class="p">][</span><span class="n">ei</span><span class="p">][</span><span class="n">zi</span><span class="p">]</span> <span class="o">=</span> <span class="n">bem</span>

<div class="viewcode-block" id="UWG.load_refDOE">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.load_refDOE">[docs]</a>
    <span class="o">@</span> <span class="nb">staticmethod</span>
    <span class="k">def</span> <span class="nf">load_refDOE</span><span class="p">(</span><span class="n">refDOE_path</span><span class="o">=</span><span class="n">REFDOE_PATH</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Static method to deserialize DOE reference data.</span>

<span class="sd">        Args:</span>
<span class="sd">            readDOE_path: Text string for full path to the refDOE pickle.</span>
<span class="sd">            (Default: the filepath specified in the UWG.REFDOE_PATH constant).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Two 16 x 3 x 16 matrices of reference BEMDef and SchDef objects,</span>
<span class="sd">            respectively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">refDOE_path</span><span class="p">),</span> \
            <span class="s1">&#39;File: </span><span class="si">{}</span><span class="s1"> does not exist.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refDOE_path</span><span class="p">)</span>

        <span class="c1"># open pickle file in binary form</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">refDOE_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">refDOE_file</span><span class="p">:</span>
            <span class="n">refBEM</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">refDOE_file</span><span class="p">)</span>
            <span class="n">refSchedule</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">refDOE_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">refBEM</span><span class="p">,</span> <span class="n">refSchedule</span></div>


    <span class="o">@</span> <span class="nb">staticmethod</span>
    <span class="k">def</span> <span class="nf">_procmat</span><span class="p">(</span><span class="n">materials</span><span class="p">,</span> <span class="n">max_thickness</span><span class="p">,</span> <span class="n">min_thickness</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Processes material layer slices in Element objects based on layer number and depth.</span>

<span class="sd">        This function will divide a material with single layer thickness or that is too</span>
<span class="sd">        thick into subdivisions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newmat</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">newthickness</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">materials</span><span class="o">.</span><span class="n">layerThermalCond</span>
        <span class="n">Vhc</span> <span class="o">=</span> <span class="n">materials</span><span class="o">.</span><span class="n">layerVolHeat</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">)):</span>
                <span class="c1"># Break up each layer that&#39;s more than max thickness (0.05m)</span>
                <span class="k">if</span> <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_thickness</span><span class="p">:</span>
                    <span class="n">nlayers</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_thickness</span><span class="p">)))</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">nlayers</span><span class="p">)):</span>
                        <span class="n">newmat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                        <span class="n">newthickness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">nlayers</span><span class="p">))</span>
                <span class="c1"># Material that&#39;s less then min_thickness is not added.</span>
                <span class="k">elif</span> <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_thickness</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING: Material layer too thin (less then 2 cm) to process.&#39;</span>
                          <span class="s1">&#39;Material </span><span class="si">{}</span><span class="s1"> is </span><span class="si">{:.2f}</span><span class="s1"> cm.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">min_thickness</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newmat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                    <span class="n">newthickness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="c1"># Divide single layer into two (UWG assumes at least 2 layers)</span>
            <span class="k">if</span> <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_thickness</span><span class="p">:</span>
                <span class="n">nlayers</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_thickness</span><span class="p">)))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">nlayers</span><span class="p">)):</span>
                    <span class="n">newmat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                    <span class="n">newthickness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">nlayers</span><span class="p">))</span>
            <span class="c1"># Material should be at least 1cm thick, so if we&#39;re here,</span>
            <span class="c1"># should give warning and stop. Only warning given for now.</span>
            <span class="k">elif</span> <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_thickness</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">newthickness</span> <span class="o">=</span> <span class="p">[</span><span class="n">min_thickness</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">min_thickness</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">]</span>
                <span class="n">newmat</span> <span class="o">=</span> <span class="p">[</span><span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                          <span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING: Material layer less then 2 cm is found.&#39;</span>
                      <span class="s1">&#39;Material </span><span class="si">{}</span><span class="s1"> is </span><span class="si">{:.2f}</span><span class="s1"> cm. May cause error.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                          <span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">min_thickness</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newthickness</span> <span class="o">=</span> <span class="p">[</span><span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span>
                                <span class="n">materials</span><span class="o">.</span><span class="n">layer_thickness_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">]</span>
                <span class="n">newmat</span> <span class="o">=</span> <span class="p">[</span><span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                          <span class="n">Material</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Vhc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">materials</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>

        <span class="k">return</span> <span class="n">newmat</span><span class="p">,</span> <span class="n">newthickness</span>

<div class="viewcode-block" id="UWG.ToString">
<a class="viewcode-back" href="../../uwg.uwg.html#uwg.uwg.UWG.ToString">[docs]</a>
    <span class="k">def</span> <span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overwrite .NET ToString method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_split_string</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;:</span><span class="se">\n</span><span class="s1">  &#39;</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_tabbed</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_split_string</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">_list_2_tabbed</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="p">[</span><span class="n">_tabbed</span><span class="p">(</span><span class="n">_b</span><span class="p">)</span> <span class="k">for</span> <span class="n">_b</span> <span class="ow">in</span> <span class="n">b</span><span class="p">])</span>

        <span class="n">simtime_str</span> <span class="o">=</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simTime</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;simTime&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No simTime attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">weather_str</span> <span class="o">=</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weather</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;weather&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No weather attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">param_str</span> <span class="o">=</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geoParam</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;geoParam&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No geoParam attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">ubl_str</span> <span class="o">=</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UBL</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;UBL&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No UBL attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rsm_str</span> <span class="o">=</span> <span class="s1">&#39;Rural &#39;</span> <span class="o">+</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RSM</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;RSM&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No Rural RSM attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">usm_str</span> <span class="o">=</span> <span class="s1">&#39;Urban &#39;</span> <span class="o">+</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">USM</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;USM&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No Urban RSM attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">ucm_str</span> <span class="o">=</span> <span class="n">_tabbed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UCM</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;UCM&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No UCM attr.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">bem_str</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEM</span><span class="p">)</span> \
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;BEM&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;No BEM attr.&#39;</span>

        <span class="k">return</span> <span class="s1">&#39;UWG for </span><span class="si">{}</span><span class="s1">:</span><span class="se">\n\n</span><span class="si">{}{}{}{}{}{}{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epw_path</span><span class="p">,</span> <span class="n">simtime_str</span><span class="p">,</span> <span class="n">weather_str</span><span class="p">,</span> <span class="n">param_str</span><span class="p">,</span> <span class="n">ubl_str</span><span class="p">,</span> <span class="n">rsm_str</span><span class="p">,</span>
            <span class="n">usm_str</span><span class="p">,</span> <span class="n">ucm_str</span><span class="p">,</span> <span class="n">bem_str</span><span class="p">)</span></div>

</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2024, Ladybug Tools.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>